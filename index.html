<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rupam — Developer & Debugger</title>
  <meta name="description" content="Rupam's single-page portfolio — part-time developer, full-time debugger" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Three.js -->
  <script src="https://unpkg.com/three@0.150.0/build/three.min.js"></script>

  <!-- Lucide Icons (UMD) -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <style>
    /* Enhanced custom styles */
    .loader-overlay {
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(0,0,0,0.97), rgba(0,0,0,0.92));
      z-index: 60;
    }
    .progress-fill { 
      width: 0%; 
      transition: width 3s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(90deg, #f59e0b, #d97706, #f59e0b);
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }
    @keyframes shimmer {
      0%, 100% { background-position: 200% 0; }
      50% { background-position: -200% 0; }
    }
    
    .three-fallback { 
      display:flex; 
      gap:0.5rem; 
      align-items:center; 
      justify-content:center; 
      color: #e6e6e6; 
      background: radial-gradient(circle at center, rgba(245,158,11,0.1), transparent 70%);
    }
    
    /* Enhanced modal animation */
    .modal-open { overflow: hidden; }
    .sr-only { position: absolute; width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0; }
    
    /* Enhanced focus ring with glow */
    .focus-ring:focus { 
      outline: 3px solid rgba(245,158,11,0.4); 
      outline-offset: 2px; 
      border-radius: .5rem;
      box-shadow: 0 0 20px rgba(245,158,11,0.3);
    }
    
    /* Enhanced tilt with more realistic physics */
    .tilt { 
      transition: transform 320ms cubic-bezier(.2,.8,.2,1); 
      transform-style: preserve-3d;
      will-change: transform;
    }
    .tilt:hover {
      transform: translateZ(20px);
    }
    
    /* Smooth entrance animations */
    .animate-in { 
      transform: translateY(0) scale(1); 
      opacity: 1; 
      transition: all 800ms cubic-bezier(.2,.9,.2,1); 
    }
    section { 
      transform: translateY(24px) scale(0.98); 
      opacity: 0; 
    }
    
    /* Enhanced navbar blur */
    .navbar-blur {
      backdrop-filter: blur(12px) saturate(180%);
      background: rgba(0, 0, 0, 0.8);
      border-bottom: 1px solid rgba(148, 163, 184, 0.1);
    }
    
    /* Card hover effects */
    .project-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(148, 163, 184, 0.1);
    }
    .project-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(245, 158, 11, 0.3);
    }
    
    /* Tech stack glow effect */
    .tech-item {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .tech-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(245,158,11,0.1), transparent);
      transition: left 0.5s ease;
    }
    .tech-item:hover::before {
      left: 100%;
    }
    .tech-item:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 10px 25px rgba(245,158,11,0.15);
    }
    
    /* Typing animation for hero text */
    .typing-animation {
      overflow: hidden;
      border-right: 2px solid #f59e0b;
      white-space: nowrap;
      animation: typing 3s steps(40, end), blink 0.75s step-end infinite;
    }
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    @keyframes blink {
      from, to { border-color: transparent; }
      50% { border-color: #f59e0b; }
    }
    
    /* Enhanced gradient backgrounds */
    .hero-gradient {
      background: radial-gradient(ellipse at center, rgba(245,158,11,0.1) 0%, transparent 70%);
    }
    
    /* Smooth scroll behavior */
    html {
      scroll-behavior: smooth;
    }
    
    /* Loading pulse effect */
    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Enhanced form styles */
    .form-input {
      transition: all 0.3s ease;
      border: 1px solid rgba(148, 163, 184, 0.2);
    }
    .form-input:focus {
      border-color: #f59e0b;
      box-shadow: 0 0 0 3px rgba(245,158,11,0.1);
    }
    
    /* Status indicator */
    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 8px;
    }
    .status-active { background: #10b981; box-shadow: 0 0 6px #10b981; }
    .status-past { background: #6b7280; }
    
    /* Enhanced mobile menu */
    .mobile-menu {
      backdrop-filter: blur(20px);
      background: rgba(0, 0, 0, 0.95);
    }
    
    /* Glitch effect for loader text */
    .glitch {
      position: relative;
    }
    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.8;
    }
    .glitch::before {
      animation: glitch-1 0.3s infinite linear alternate-reverse;
      color: #ff0040;
      z-index: -1;
    }
    .glitch::after {
      animation: glitch-2 0.3s infinite linear alternate-reverse;
      color: #00ffff;
      z-index: -2;
    }
    @keyframes glitch-1 {
      0% { transform: translateX(-2px) skewX(10deg); }
      100% { transform: translateX(2px) skewX(-10deg); }
    }
    @keyframes glitch-2 {
      0% { transform: translateX(2px) skewX(-10deg); }
      100% { transform: translateX(-2px) skewX(10deg); }
    }
  </style>
</head>
<body class="bg-black text-slate-100 antialiased selection:bg-yellow-400 selection:text-black overflow-x-hidden">

<!-- Enhanced Loader with glitch effect -->
<div id="loader" class="loader-overlay fixed inset-0 flex flex-col items-center justify-center text-center p-6">
  <div class="max-w-lg w-full">
    <div class="mb-8 flex items-center justify-center">
      <div class="relative">
        <i data-lucide="cpu" class="w-12 h-12 text-yellow-400 pulse"></i>
        <div class="absolute inset-0 w-12 h-12 rounded-full border-2 border-yellow-400 border-t-transparent animate-spin"></div>
      </div>
    </div>
    <p class="text-xl font-bold text-white mb-2 glitch" data-text="I'm not a professional UI/UX designer — don't expect much.">I'm not a professional UI/UX designer — don't expect much.</p>
    <div class="mt-8">
      <div class="w-full h-3 bg-slate-800 rounded-full overflow-hidden shadow-inner">
        <div class="progress-fill h-3 rounded-full"></div>
      </div>
      <div id="loader-percent" class="text-lg font-mono text-slate-300 mt-4">0%</div>
    </div>
    <p class="text-sm text-slate-400 mt-6 animate-pulse">Initializing debugging protocols...</p>
  </div>
</div>

<!-- Main content with enhanced styling -->
<main id="main-content" class="min-h-screen opacity-0 transition-opacity duration-700">

  <!-- Enhanced Navbar with better blur -->
  <header class="sticky top-0 z-50 navbar-blur">
    <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center gap-3">
          <button id="brand" class="inline-flex items-center gap-2 focus-ring group" aria-label="Rupam brand">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-yellow-400 via-amber-500 to-orange-500 flex items-center justify-center text-black font-bold shadow-lg group-hover:scale-110 transition-transform">RG</div>
            <span class="hidden sm:inline text-sm font-medium bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent">Rupam Ghosh</span>
          </button>
        </div>

        <div class="hidden md:flex items-center gap-8">
          <a href="#hero" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Home</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#projects" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Projects</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#about" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>About</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#tech-stack" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Tech</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#contact" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Contact</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <button id="hire-btn-nav" class="ml-2 px-6 py-2.5 rounded-lg bg-gradient-to-r from-amber-400 to-yellow-500 text-black font-semibold hover:scale-105 hover:shadow-lg focus-ring transition-all duration-200">Hire me</button>
        </div>

        <!-- Enhanced mobile menu button -->
        <div class="md:hidden">
          <button id="mobile-toggle" aria-label="Open menu" class="p-2 rounded-md focus-ring hover:bg-slate-800 transition-colors">
            <i data-lucide="menu" class="w-6 h-6 text-slate-200"></i>
          </button>
        </div>
      </div>
      
      <!-- Enhanced mobile nav -->
      <div id="mobile-nav" class="md:hidden hidden pb-4 mobile-menu rounded-b-lg">
        <div class="flex flex-col gap-1 mt-2">
          <a href="#hero" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="home" class="w-4 h-4 inline mr-2"></i>Home
          </a>
          <a href="#projects" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="folder" class="w-4 h-4 inline mr-2"></i>Projects
          </a>
          <a href="#about" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>About
          </a>
          <a href="#tech-stack" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="code" class="w-4 h-4 inline mr-2"></i>Tech
          </a>
          <a href="#contact" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="mail" class="w-4 h-4 inline mr-2"></i>Contact
          </a>
          <button id="mobile-hire" class="mt-3 mx-2 px-4 py-3 rounded-lg bg-gradient-to-r from-amber-400 to-yellow-500 text-black font-semibold hover:scale-105 transition-transform">Hire me</button>
        </div>
      </div>
    </nav>
  </header>

  <!-- Enhanced Hero section -->
  <section id="hero" class="relative min-h-screen flex items-center hero-gradient">
    <!-- Enhanced 3D canvas -->
    <div class="absolute inset-0 -z-10">
      <canvas id="three-canvas" class="w-full h-full block"></canvas>
      <div id="three-fallback" class="hidden h-full w-full bg-gradient-to-b from-black/90 to-black/95 flex items-center justify-center three-fallback">
        <div class="text-center">
          <i data-lucide="cpu" class="w-16 h-16 text-slate-300 mx-auto mb-4"></i>
          <span class="text-slate-300 text-lg">3D visualization disabled</span>
          <p class="text-slate-500 text-sm mt-2">Static tech environment active</p>
        </div>
      </div>
    </div>

    <div class="max-w-6xl mx-auto w-full px-6 sm:px-8 flex flex-col lg:flex-row items-center gap-12">
      <div class="lg:w-3/5 text-left space-y-8">
        <div class="space-y-4">
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight text-white">
            <span class="block typing-animation">Hey — welcome to</span>
            <span class="block bg-gradient-to-r from-yellow-400 via-amber-500 to-orange-500 bg-clip-text text-transparent">Rupam's portfolio.</span>
          </h1>
          <p class="text-xl sm:text-2xl text-slate-300 font-light">
            Part-time developer, <span class="text-yellow-400 font-semibold">full-time debugger.</span>
          </p>
        </div>

        <!-- Enhanced stats row -->
        <div class="flex flex-wrap gap-6 text-center sm:text-left">
          <div class="flex items-center gap-2">
            <div class="status-indicator status-active"></div>
            <span class="text-sm text-slate-400">Available for hire</span>
          </div>
          <div class="flex items-center gap-2">
            <i data-lucide="coffee" class="w-4 h-4 text-amber-400"></i>
            <span class="text-sm text-slate-400">Coffee-driven development</span>
          </div>
          <div class="flex items-center gap-2">
            <i data-lucide="map-pin" class="w-4 h-4 text-amber-400"></i>
            <span class="text-sm text-slate-400">Siliguri, West Bengal</span>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 mt-8">
          <button id="hero-hire" class="px-8 py-4 rounded-xl bg-gradient-to-r from-amber-400 to-yellow-500 text-black font-semibold hover:scale-105 hover:shadow-xl focus-ring transition-all duration-200 text-lg">
            <i data-lucide="briefcase" class="w-5 h-5 inline mr-2"></i>
            Hire me
          </button>
          <a href="#projects" class="px-8 py-4 rounded-xl border-2 border-slate-600 text-slate-200 hover:bg-slate-800 hover:border-amber-400 focus-ring flex items-center justify-center gap-3 font-semibold transition-all duration-200 text-lg">
            <i data-lucide="folder" class="w-5 h-5"></i>
            View projects
          </a>
        </div>
      </div>

      <div class="lg:w-2/5 flex justify-center items-center">
        <!-- Enhanced hero card with better styling -->
        <div class="w-full max-w-sm rounded-2xl bg-black/60 border border-slate-700 p-6 shadow-2xl tilt backdrop-blur-sm" id="hero-card">
          <div class="flex items-start gap-4">
            <div class="w-14 h-14 rounded-xl bg-gradient-to-tr from-yellow-400 via-amber-400 to-orange-500 flex items-center justify-center text-black shadow-lg">
              <i data-lucide="zap" class="w-7 h-7"></i>
            </div>
            <div class="flex-1">
              <div class="text-sm text-slate-400 uppercase tracking-wide">Live Demo</div>
              <div class="text-white font-bold text-lg mt-1">Interactive Tech Scene</div>
            </div>
          </div>

          <div class="mt-6 space-y-3">
            <div class="text-sm text-slate-300 leading-relaxed">
              Experience an interactive 3D visualization of technology components. Mouse controls available on larger screens.
            </div>
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></div>
              <span class="text-xs text-green-400 font-medium">System Online</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Enhanced Projects section -->
  <section id="projects" class="py-20 bg-gradient-to-b from-black to-slate-900">
    <div class="max-w-6xl mx-auto px-6 sm:px-8">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-12 gap-6">
        <div>
          <h2 class="text-3xl sm:text-4xl font-bold mb-3">
            Projects 
            <span class="text-amber-400 text-lg font-normal">The Good, The Bad, The Debugged</span>
          </h2>
          <p class="text-slate-400 text-lg">Past projects and current work in progress</p>
        </div>

        <div class="flex gap-2 flex-wrap">
          <button data-filter="all" class="filter-btn px-4 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-sm text-slate-200 focus-ring transition-colors">
            All Projects
          </button>
          <button data-filter="past" class="filter-btn px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm text-slate-200 focus-ring transition-colors">
            Past Work
          </button>
          <button data-filter="current" class="filter-btn px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm text-slate-200 focus-ring transition-colors">
            Current
          </button>
        </div>
      </div>

      <div id="projects-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-8"></div>
    </div>
  </section>

  <!-- Enhanced About section -->
  <section id="about" class="py-20 bg-gradient-to-r from-black via-slate-900 to-black">
    <div class="max-w-6xl mx-auto px-6 sm:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      <div class="space-y-6">
        <div>
          <h2 class="text-3xl sm:text-4xl font-bold mb-4">
            About <span class="text-amber-400">Me</span>
          </h2>
          <div class="w-20 h-1 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-full mb-6"></div>
        </div>
        
        <div class="space-y-4 text-lg leading-relaxed">
          <p class="text-slate-300">
            Hi, I'm Rupam. I turn coffee into code and error messages into life lessons. I specialize in building practical web systems, debugging things that should have been obvious, and occasionally shipping clean code.
          </p>
          <p class="text-slate-400">
            <span class="text-amber-400 font-semibold">Superpower:</span> Reading stack traces other devs refused to touch.
          </p>
        </div>

        <!-- Enhanced skills indicators -->
        <div class="grid grid-cols-2 gap-4 mt-8">
          <div class="text-center p-4 bg-slate-800/50 rounded-lg border border-slate-700">
            <div class="text-2xl font-bold text-amber-400">3+</div>
            <div class="text-sm text-slate-400">Years Experience</div>
          </div>
          <div class="text-center p-4 bg-slate-800/50 rounded-lg border border-slate-700">
            <div class="text-2xl font-bold text-amber-400">10+</div>
            <div class="text-sm text-slate-400">Projects Shipped</div>
          </div>
        </div>
      </div>

      <div class="flex justify-center lg:justify-end">
        <div id="photo-frame" class="tilt w-80 max-w-full rounded-2xl overflow-hidden border-2 border-slate-700 bg-gradient-to-br from-slate-800/60 to-black p-2 shadow-2xl hover:border-amber-400/50 transition-all duration-300">
          <img id="profile-photo" src="assets/rupam-744x1024.jpg" alt="Rupam in black blazer" width="744" height="1024"
               class="w-full h-auto object-cover block bg-slate-900 rounded-xl">
        </div>
      </div>
    </div>
  </section>

  <!-- Enhanced Tech Stack -->
  <section id="tech-stack" class="py-20 bg-black">
    <div class="max-w-6xl mx-auto px-6 sm:px-8">
      <div class="flex items-center gap-4 mb-12">
        <div class="flex items-center justify-center w-12 h-12 rounded-2xl bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg">
          <i data-lucide="code" class="w-6 h-6"></i>
        </div>
        <div>
          <h2 class="text-3xl font-bold">Technology Stack</h2>
          <p class="text-slate-400">Tools and technologies I work with</p>
        </div>
      </div>

      <div id="tech-grid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-6"></div>
    </div>
  </section>

  <!-- Enhanced Contact section -->
  <section id="contact" class="py-20 bg-gradient-to-b from-slate-900 to-black">
    <div class="max-w-4xl mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-3xl sm:text-4xl font-bold mb-4">Get In Touch</h2>
        <p class="text-xl text-slate-400">Ready to start your next project? Let's talk.</p>
        <div class="w-20 h-1 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-full mx-auto mt-6"></div>
      </div>

      <form id="contact-form" class="bg-slate-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-slate-700 space-y-6" autocomplete="on">
        <input class="sr-only" type="text" name="honey" tabindex="-1" aria-hidden="true">

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <label class="block">
            <span class="text-sm font-semibold text-slate-300 mb-2 block">Name *</span>
            <input id="name" name="name" required 
                   class="form-input mt-1 block w-full px-4 py-3 rounded-lg bg-slate-700 text-white focus-ring placeholder-slate-400" 
                   placeholder="Your full name" />
          </label>

          <label class="block">
            <span class="text-sm font-semibold text-slate-300 mb-2 block">Email *</span>
            <input id="email" type="email" name="email" required 
                   class="form-input mt-1 block w-full px-4 py-3 rounded-lg bg-slate-700 text-white focus-ring placeholder-slate-400"
                   placeholder="your.email@example.com" />
          </label>
        </div>

        <label class="block">
          <span class="text-sm font-semibold text-slate-300 mb-2 block">Message *</span>
          <textarea id="message" name="message" rows="6" required 
                    class="form-input mt-1 block w-full px-4 py-3 rounded-lg bg-slate-700 text-white focus-ring placeholder-slate-400 resize-none"
                    placeholder="Tell me about your project..."></textarea>
        </label>

        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
          <button type="submit" id="submit-btn" 
                  class="px-8 py-3 bg-gradient-to-r from-amber-400 to-yellow-500 text-black rounded-lg font-semibold hover:scale-105 focus-ring transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
            <i data-lucide="send" class="w-4 h-4 inline mr-2"></i>
            Send Message
          </button>
          <div id="form-status" class="text-sm text-slate-300"></div>
        </div>
      </form>
    </div>
  </section>

  <!-- Enhanced Social/Footer -->
  <footer class="py-12 bg-black border-t border-slate-800">
    <div class="max-w-6xl mx-auto px-6 sm:px-8 flex flex-col md:flex-row items-center justify-between gap-8">
      <div class="flex items-center gap-6">
        <a href="https://github.com/" target="_blank" rel="noopener noreferrer" 
           class="text-slate-400 hover:text-white hover:scale-110 transition-all duration-200 p-2">
          <i data-lucide="github" class="w-6 h-6"></i><span class="sr-only">GitHub</span>
        </a>
        <a href="https://www.linkedin.com/in/rupam-ghosh-162593273" target="_blank" rel="noopener noreferrer" 
           class="text-slate-400 hover:text-white hover:scale-110 transition-all duration-200 p-2">
          <i data-lucide="linkedin" class="w-6 h-6"></i><span class="sr-only">LinkedIn</span>
        </a>
        <a href="https://x.com/" target="_blank" rel="noopener noreferrer" 
           class="text-slate-400 hover:text-white hover:scale-110 transition-all duration-200 p-2">
          <i data-lucide="twitter" class="w-6 h-6"></i><span class="sr-only">X</span>
        </a>

        <!-- Enhanced tooltips -->
        <div class="relative group">
          <button id="insta-btn" class="text-slate-400 hover:text-white hover:scale-110 focus-ring p-2 transition-all duration-200" aria-describedby="insta-tip">
            <i data-lucide="instagram" class="w-6 h-6"></i>
            <span class="sr-only">Instagram</span>
          </button>
          <div id="insta-tip" role="tooltip" class="invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-700 backdrop-blur-sm px-3 py-2 rounded-lg text-xs text-slate-200 shadow-lg whitespace-nowrap border border-slate-600">
            Sorry — I don't have time for Instagram.
            <div class="absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-700"></div>
          </div>
        </div>

        <div class="relative group">
          <button id="fb-btn" class="text-slate-400 hover:text-white hover:scale-110 focus-ring p-2 transition-all duration-200" aria-describedby="fb-tip">
            <i data-lucide="facebook" class="w-6 h-6"></i>
            <span class="sr-only">Facebook</span>
          </button>
          <div id="fb-tip" role="tooltip" class="invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-700 backdrop-blur-sm px-3 py-2 rounded-lg text-xs text-slate-200 shadow-lg whitespace-nowrap border border-slate-600">
            Sorry — I don't have time for Facebook.
            <div class="absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-700"></div>
          </div>
        </div>
      </div>

      <div class="text-center md:text-right">
        <div class="text-slate-500 text-sm mb-2">© 2025 Rupam Ghosh</div>
        <div class="text-slate-600 text-xs">No bugs were harmed in production.</div>
      </div>
    </div>
  </footer>

  <!-- Enhanced Hire Modal -->
  <div id="hire-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm">
    <div class="bg-slate-800 rounded-2xl p-8 max-w-md w-full mx-4 transform transition-all scale-95 opacity-0 border border-slate-700 shadow-2xl" id="hire-modal-inner" role="dialog" aria-modal="true" aria-labelledby="hire-title">
      <div class="text-center">
        <div class="w-16 h-16 mx-auto bg-gradient-to-r from-amber-400 to-yellow-500 rounded-2xl flex items-center justify-center mb-6">
          <i data-lucide="briefcase" class="w-8 h-8 text-black"></i>
        </div>
        <h3 id="hire-title" class="text-2xl font-bold mb-4 text-white">Hold up!</h3>
        <p class="text-slate-300 mb-2 text-lg">Currently working as a freelancer</p>
        <p class="text-slate-400 mb-8 text-sm">I may get expensive for you, but the quality is worth it.</p>

        <div class="flex flex-col sm:flex-row gap-4">
          <button id="contact-anyway-btn" class="flex-1 bg-gradient-to-r from-amber-400 to-yellow-500 text-black py-3 px-6 rounded-lg font-semibold hover:scale-105 focus-ring transition-all duration-200">
            <i data-lucide="mail" class="w-4 h-4 inline mr-2"></i>
            Contact anyway
          </button>
          <button id="close-modal-btn" class="flex-1 border-2 border-slate-600 text-slate-200 py-3 px-6 rounded-lg font-semibold hover:bg-slate-700 hover:border-slate-500 focus-ring transition-all duration-200">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

</main>

<!-- Enhanced JavaScript -->
<script>
/* Enhanced Data with better project descriptions and technologies */
const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/AKfycby_3cUZeM7RapicKpdny35Gf8WmktfWVmupNwQ0M1FR0A2yDH_D7nVn7Evz0O4X4CzElg/exec';

const projectsData = [
  { 
    id: 1, 
    title: "E-Commerce Platform", 
    description: "Full-featured shopping platform with real payment processing, inventory management, and admin dashboard. Built for scalability with modern architecture patterns.", 
    category: "past", 
    role: "Full Stack Developer", 
    duration: "6 months", 
    technologies: ["React", "Node.js", "MongoDB", "Stripe", "AWS"], 
    icon: "shopping-cart", 
    gradient: "from-blue-600 to-purple-600",
    github: "https://github.com/",
    demo: "https://demo.example.com"
  },
  { 
    id: 2, 
    title: "Task Management App", 
    description: "Mobile-first task management solution with team collaboration, real-time updates, and dark mode. Because the world needed another todo app (but this one actually works).", 
    category: "past", 
    role: "Mobile Developer", 
    duration: "3 months", 
    technologies: ["React Native", "Firebase", "Redux", "Push Notifications"], 
    icon: "smartphone", 
    gradient: "from-green-600 to-teal-600",
    github: "https://github.com/",
    demo: "https://demo.example.com"
  },
  { 
    id: 3, 
    title: "AI Code Reviewer", 
    description: "Intelligent code review system that analyzes code quality, suggests improvements, and catches bugs before they reach production. AI that judges my code better than my past self does.", 
    category: "current", 
    role: "Solo Developer", 
    duration: "Ongoing", 
    technologies: ["Python", "OpenAI", "FastAPI", "Docker", "PostgreSQL"], 
    icon: "zap", 
    gradient: "from-yellow-600 to-orange-600", 
    active: true,
    github: "https://github.com/",
    demo: "https://preview.example.com"
  },
  {
    id: 4,
    title: "Real-time Chat Platform",
    description: "Secure messaging platform with end-to-end encryption, file sharing, and video calling. Built for privacy-conscious users who value security.",
    category: "past",
    role: "Backend Developer",
    duration: "4 months",
    technologies: ["Socket.io", "Express", "Redis", "WebRTC", "JWT"],
    icon: "message-circle",
    gradient: "from-indigo-600 to-purple-600",
    github: "https://github.com/",
    demo: "https://chat.example.com"
  }
];

const techStackData = [
  { 
    name: "JavaScript", 
    level: "Expert", 
    color: "yellow-500", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjdERjFFIi8+CjxwYXRoIGQ9Ik0yNiAyOEMyNiAzMCAyNCAzMSAyMiAzMUMyMCAzMSAxOCAzMCAxOCAyN1YxNUgxNVYyN0MxNSAzMiAxOSAzNSAyNCAzNUMyOSAzNSAzMyAzMiAzMyAyN0gyOUMyOSAyOCAyNyAzMCAyNiAyOFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",
    experience: "5+ years"
  },
  { 
    name: "React", 
    level: "Expert", 
    color: "blue-500", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiM2MUREREIiLz4KPGVsbGlwc2UgY3g9IjIwIiBjeT0iMjAiIHJ4PSI3IiByeT0iMyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxlbGxpcHNlIGN4PSIyMCIgY3k9IjIwIiByeD0iNyIgcnk9IjMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJyb3RhdGUoNjAgMjAgMjApIi8+CjxlbGxpcHNlIGN4PSIyMCIgY3k9IjIwIiByeD0iNyIgcnk9IjMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDIwIDIwKSIvPgo8Y2lyY2xlIGN4PSIyMCIgY3k9IjIwIiByPSIyIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K",
    experience: "4+ years"
  },
  { 
    name: "Node.js", 
    level: "Advanced", 
    color: "green-500", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDJMMzUgMTBWMzBMMjAgMzhMNSAzMFYxMEwyMCAyWiIgZmlsbD0iIzY4QTI2MyIvPgo8cGF0aCBkPSJNMjAgMTBMMzAgMTVWMjVMMjAgMzBMMTAgMjVWMTVMMjAgMTBaIiBmaWxsPSIjMzMzIi8+Cjwvc3ZnPgo=",
    experience: "3+ years"
  },
  { 
    name: "Python", 
    level: "Advanced", 
    color: "blue-400", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGVsbGlwc2UgY3g9IjIwIiBjeT0iMTUiIHJ4PSIxNSIgcnk9IjEwIiBmaWxsPSIjMzc3NkFCIi8+CjxlbGxpcHNlIGN4PSIyMCIgY3k9IjI1IiByeD0iMTUiIHJ5PSIxMCIgZmlsbD0iI0ZGRDQzQiIvPgo8Y2lyY2xlIGN4PSIxNSIgY3k9IjEyIiByPSIyIiBmaWxsPSJ3aGl0ZSIvPgo8Y2lyY2xlIGN4PSIyNSIgY3k9IjI4IiByPSIyIiBmaWxsPSIjMzc3NkFCIi8+Cjwvc3ZnPgo=",
    experience: "3+ years"
  },
  { 
    name: "MongoDB", 
    level: "Intermediate", 
    color: "green-600", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGVsbGlwc2UgY3g9IjIwIiBjeT0iMjAiIHJ4PSIxOCIgcnk9IjE4IiBmaWxsPSIjNDdBMjQ4Ii8+CjxwYXRoIGQ9Ik0yMCA4QzI2IDggMzAgMTQgMzAgMjBTMjYgMzIgMjAgMzJTMTAgMjYgMTAgMjBTMTQgOCAyMCA4WiIgZmlsbD0iIzMzMzMzMyIvPgo8L3N2Zz4K",
    experience: "2+ years"
  },
  { 
    name: "Git", 
    level: "Expert", 
    color: "orange-500", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNCIgZmlsbD0iI0YwNTAzMiIvPgo8cGF0aCBkPSJNMTkgMTBMMjkgMjBMMTkgMzBMMTUgMjZMMjEgMjBMMTUgMTRMMTkgMTBaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",
    experience: "5+ years"
  },
  { 
    name: "Docker", 
    level: "Intermediate", 
    color: "blue-600", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMjQ5NkVEIi8+CjxwYXRoIGQ9Ik0xMCAxNUgyNUwzNSAyMEwyNSAyNUgxMFYxNVoiIGZpbGw9IndoaXRlIi8+CjxyZWN0IHg9IjEwIiB5PSIxNSIgd2lkdGg9IjMiIGhlaWdodD0iMTAiIGZpbGw9IiMyNDk2RUQiLz4KPC9zdmc+Cg==",
    experience: "2+ years"
  },
  { 
    name: "AWS", 
    level: "Intermediate", 
    color: "orange-400", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRkY5OTAwIi8+CjxwYXRoIGQ9Ik0xMCAxMEgzMFYzMEgxMFYxMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNSAxNUgyNVYyNUgxNVYxNVoiIGZpbGw9IiNGRjk5MDAiLz4KPC9zdmc+Cg==",
    experience: "2+ years"
  }
];

/* Enhanced DOM management */
const dom = {};
document.addEventListener('DOMContentLoaded', () => {
  // Cache DOM elements
  dom.loader = document.getElementById('loader');
  dom.progressFill = document.querySelector('.progress-fill');
  dom.loaderPercent = document.getElementById('loader-percent');
  dom.main = document.getElementById('main-content');

  dom.projectsGrid = document.getElementById('projects-grid');
  dom.techGrid = document.getElementById('tech-grid');

  dom.mobileToggle = document.getElementById('mobile-toggle');
  dom.mobileNav = document.getElementById('mobile-nav');

  dom.hireBtn = document.getElementById('hero-hire');
  dom.hireBtnNav = document.getElementById('hire-btn-nav');
  dom.mobileHire = document.getElementById('mobile-hire');
  dom.hireModal = document.getElementById('hire-modal');
  dom.hireInner = document.getElementById('hire-modal-inner');
  dom.contactAnyway = document.getElementById('contact-anyway-btn');
  dom.closeModal = document.getElementById('close-modal-btn');

  dom.contactForm = document.getElementById('contact-form');
  dom.formStatus = document.getElementById('form-status');

  dom.instaBtn = document.getElementById('insta-btn');
  dom.instaTip = document.getElementById('insta-tip');
  dom.fbBtn = document.getElementById('fb-btn');
  dom.fbTip = document.getElementById('fb-tip');

  // Initialize Lucide icons
  if (typeof lucide !== 'undefined') lucide.createIcons();

  // Initialize everything
  startEnhancedLoader();
  bindEnhancedNav();
  renderEnhancedProjects();
  renderEnhancedTechStack();
  bindProjectFilters();
  bindEnhancedSocialTooltips();
  bindEnhancedContactForm();
  bindHireModal();
  bindProfileTilt();
  initScrollAnimations();
  initTypingAnimation();
});

/* Enhanced loader with better progression */
function startEnhancedLoader() {
  const messages = [
    "Initializing debugging protocols...",
    "Compiling coffee into code...",
    "Parsing stack traces...",
    "Optimizing user experience...",
    "Ready to debug the world!"
  ];
  
  let messageIndex = 0;
  const messageEl = dom.loader.querySelector('p');
  
  // Change message every 600ms
  const messageInterval = setInterval(() => {
    if (messageIndex < messages.length - 1) {
      messageEl.textContent = messages[++messageIndex];
    }
  }, 600);

  requestAnimationFrame(() => {
    dom.progressFill.style.width = '100%';
    const start = performance.now();
    const duration = 3000;
    
    function updateProgress(now) {
      const progress = Math.min(1, (now - start) / duration);
      const percentage = Math.floor(progress * 100);
      dom.loaderPercent.textContent = percentage + '%';
      
      if (progress < 1) {
        requestAnimationFrame(updateProgress);
      } else {
        clearInterval(messageInterval);
        setTimeout(() => {
          dom.loader.classList.add('opacity-0');
          setTimeout(() => { 
            dom.loader.style.display = 'none'; 
            dom.main.style.opacity = '1'; 
            initThreeScene();
          }, 500);
        }, 200);
      }
    }
    
    updateProgress(performance.now());
  });
}

/* Enhanced navigation with smooth scrolling and active states */
function bindEnhancedNav() {
  // Mobile menu toggle
  dom.mobileToggle?.addEventListener('click', () => {
    dom.mobileNav.classList.toggle('hidden');
  });

  // Close mobile nav on link clicks
  dom.mobileNav?.querySelectorAll('a')?.forEach(link => {
    link.addEventListener('click', () => {
      dom.mobileNav.classList.add('hidden');
    });
  });

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      const targetId = this.getAttribute('href');
      if (targetId && targetId !== '#') {
        e.preventDefault();
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          const headerOffset = 80;
          const elementPosition = targetElement.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });

  // Active navigation highlighting
  const navLinks = document.querySelectorAll('.nav-link');
  const sections = document.querySelectorAll('section[id]');

  function highlightActiveNav() {
    let currentSection = '';
    sections.forEach(section => {
      const sectionTop = section.getBoundingClientRect().top;
      if (sectionTop <= 100) {
        currentSection = section.getAttribute('id');
      }
    });

    navLinks.forEach(link => {
      link.classList.remove('text-amber-400');
      link.classList.add('text-slate-300');
      if (link.getAttribute('href') === `#${currentSection}`) {
        link.classList.add('text-amber-400');
        link.classList.remove('text-slate-300');
      }
    });
  }

  window.addEventListener('scroll', throttle(highlightActiveNav, 100));

  // Hire button event listeners
  [dom.hireBtn, dom.hireBtnNav, dom.mobileHire].forEach(btn => {
    btn?.addEventListener('click', openHireModal);
  });
}

/* Enhanced project rendering with better cards */
function renderEnhancedProjects() {
  if (!dom.projectsGrid) return;
  
  dom.projectsGrid.innerHTML = '';
  
  projectsData.forEach((project, index) => {
    const card = document.createElement('article');
    card.className = 'project-card bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 flex flex-col justify-between hover:border-amber-400/30 transition-all duration-300';
    card.setAttribute('data-category', project.category);
    card.style.animationDelay = `${index * 100}ms`;

    const header = document.createElement('div');
    header.className = 'flex items-start gap-4 mb-4';
    
    const iconContainer = document.createElement('div');
    iconContainer.className = 'relative';
    
    const iconWrapper = document.createElement('div');
    iconWrapper.className = `w-14 h-14 rounded-xl flex items-center justify-center bg-gradient-to-r ${project.gradient} shadow-lg`;
    
    const icon = document.createElement('i');
    icon.dataset.lucide = project.icon || 'folder';
    icon.className = 'w-7 h-7 text-white';
    iconWrapper.appendChild(icon);
    
    if (project.active) {
      const statusDot = document.createElement('div');
      statusDot.className = 'absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-slate-800 animate-pulse';
      iconContainer.appendChild(statusDot);
    }
    
    iconContainer.appendChild(iconWrapper);
    header.appendChild(iconContainer);

    const titleGroup = document.createElement('div');
    titleGroup.className = 'flex-1';
    titleGroup.innerHTML = `
      <div class="flex items-center gap-2 mb-1">
        <h3 class="text-xl font-bold text-white">${escapeHtml(project.title)}</h3>
        ${project.active ? '<span class="px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium">Active</span>' : ''}
      </div>
      <div class="flex items-center gap-3 text-sm text-slate-400">
        <span class="flex items-center gap-1">
          <i data-lucide="user" class="w-3 h-3"></i>
          ${escapeHtml(project.role)}
        </span>
        <span class="flex items-center gap-1">
          <i data-lucide="clock" class="w-3 h-3"></i>
          ${escapeHtml(project.duration)}
        </span>
      </div>
    `;
    header.appendChild(titleGroup);

    const description = document.createElement('p');
    description.className = 'text-slate-300 leading-relaxed mb-6';
    description.textContent = project.description;

    const techContainer = document.createElement('div');
    techContainer.className = 'mb-6';
    
    const techLabel = document.createElement('div');
    techLabel.className = 'text-xs font-semibold text-slate-400 uppercase tracking-wide mb-3';
    techLabel.textContent = 'Technologies';
    
    const techGrid = document.createElement('div');
    techGrid.className = 'flex flex-wrap gap-2';
    
    project.technologies.forEach(tech => {
      const techTag = document.createElement('span');
      techTag.className = 'px-3 py-1 bg-slate-700/60 text-slate-200 rounded-full text-sm font-medium border border-slate-600 hover:bg-slate-600/60 transition-colors';
      techTag.textContent = tech;
      techGrid.appendChild(techTag);
    });
    
    techContainer.appendChild(techLabel);
    techContainer.appendChild(techGrid);

    const footer = document.createElement('div');
    footer.className = 'flex items-center justify-between pt-4 border-t border-slate-700';
    
    const links = document.createElement('div');
    links.className = 'flex items-center gap-4';
    
    const demoLink = document.createElement('a');
    demoLink.href = project.demo || '#';
    demoLink.className = 'inline-flex items-center gap-2 text-amber-400 hover:text-amber-300 font-medium transition-colors';
    demoLink.innerHTML = `
      <i data-lucide="external-link" class="w-4 h-4"></i>
      <span>${project.category === 'current' ? 'Preview' : 'Live Demo'}</span>
    `;
    
    const codeLink = document.createElement('a');
    codeLink.href = project.github || '#';
    codeLink.className = 'inline-flex items-center gap-2 text-slate-300 hover:text-white font-medium transition-colors';
    codeLink.innerHTML = `
      <i data-lucide="github" class="w-4 h-4"></i>
      <span>Source</span>
    `;
    
    links.appendChild(demoLink);
    links.appendChild(codeLink);
    
    const categoryBadge = document.createElement('span');
    categoryBadge.className = `px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide ${
      project.category === 'current' 
        ? 'bg-blue-500/20 text-blue-400' 
        : 'bg-slate-600/20 text-slate-400'
    }`;
    categoryBadge.textContent = project.category;
    
    footer.appendChild(links);
    footer.appendChild(categoryBadge);

    card.appendChild(header);
    card.appendChild(description);
    card.appendChild(techContainer);
    card.appendChild(footer);

    dom.projectsGrid.appendChild(card);
  });
  
  // Re-initialize Lucide icons for new elements
  if (typeof lucide !== 'undefined') lucide.createIcons();
}

/* Enhanced tech stack with better visual hierarchy */
function renderEnhancedTechStack() {
  if (!dom.techGrid) return;
  
  dom.techGrid.innerHTML = '';
  
  techStackData.forEach((tech, index) => {
    const item = document.createElement('div');
    item.className = 'tech-item bg-slate-800 border border-slate-700 rounded-2xl p-6 flex flex-col items-center gap-4 text-center hover:border-amber-400/30 cursor-pointer';
    item.style.animationDelay = `${index * 50}ms`;
    
    // Icon container with glow effect
    const iconContainer = document.createElement('div');
    iconContainer.className = 'relative w-16 h-16 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg';
    
    const icon = document.createElement('img');
    icon.src = tech.logo;
    icon.alt = tech.name + ' logo';
    icon.className = 'w-10 h-10 object-contain filter drop-shadow-sm';
    icon.onerror = function() {
      // Fallback to Lucide icon if image fails
      this.style.display = 'none';
      const fallbackIcon = document.createElement('i');
      fallbackIcon.dataset.lucide = 'code';
      fallbackIcon.className = 'w-8 h-8 text-slate-400';
      iconContainer.appendChild(fallbackIcon);
      if (typeof lucide !== 'undefined') lucide.createIcons();
    };
    
    iconContainer.appendChild(icon);
    
    // Tech info
    const info = document.createElement('div');
    info.className = 'space-y-2';
    
    const name = document.createElement('h3');
    name.className = 'text-lg font-bold text-white';
    name.textContent = tech.name;
    
    const level = document.createElement('div');
    level.className = 'text-sm text-slate-400';
    level.textContent = tech.level;
    
    const experience = document.createElement('div');
    experience.className = 'text-xs text-slate-500';
    experience.textContent = tech.experience;
    
    // Skill level indicator
    const skillBar = document.createElement('div');
    skillBar.className = 'w-full h-1 bg-slate-700 rounded-full overflow-hidden';
    
    const skillFill = document.createElement('div');
    const skillWidth = tech.level === 'Expert' ? '100%' : tech.level === 'Advanced' ? '80%' : '60%';
    skillFill.className = 'h-full bg-gradient-to-r from-amber-400 to-yellow-500 transition-all duration-1000 ease-out';
    skillFill.style.width = '0%';
    
    // Animate skill bar on scroll
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setTimeout(() => {
            skillFill.style.width = skillWidth;
          }, index * 100);
        }
      });
    });
    observer.observe(item);
    
    skillBar.appendChild(skillFill);
    
    info.appendChild(name);
    info.appendChild(level);
    info.appendChild(experience);
    info.appendChild(skillBar);
    
    item.appendChild(iconContainer);
    item.appendChild(info);
    
    dom.techGrid.appendChild(item);
  });
}

/* Enhanced project filtering with smooth animations */
function bindProjectFilters() {
  document.querySelectorAll('.filter-btn').forEach(button => {
    button.addEventListener('click', (e) => {
      // Update active button
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('bg-slate-700');
        btn.classList.add('bg-slate-800');
      });
      e.currentTarget.classList.add('bg-slate-700');
      e.currentTarget.classList.remove('bg-slate-800');
      
      const filterValue = e.currentTarget.getAttribute('data-filter');
      const projects = document.querySelectorAll('[data-category]');
      
      projects.forEach((project, index) => {
        const shouldShow = filterValue === 'all' || project.getAttribute('data-category') === filterValue;
        
        if (shouldShow) {
          project.style.display = '';
          project.style.animation = `fadeInUp 0.6s ease forwards ${index * 0.1}s`;
        } else {
          project.style.animation = 'fadeOut 0.3s ease forwards';
          setTimeout(() => {
            project.style.display = 'none';
          }, 300);
        }
      });
    });
  });
}

/* Enhanced social tooltips with better UX */
function bindEnhancedSocialTooltips() {
  const tooltipElements = [
    { button: dom.instaBtn, tooltip: dom.instaTip },
    { button: dom.fbBtn, tooltip: dom.fbTip }
  ];
  
  tooltipElements.forEach(({ button, tooltip }) => {
    if (!button || !tooltip) return;
    
    let hideTimeout;
    
    const showTooltip = () => {
      clearTimeout(hideTimeout);
      tooltip.classList.remove('invisible');
      tooltip.classList.add('opacity-100');
    };
    
    const hideTooltip = () => {
      hideTimeout = setTimeout(() => {
        tooltip.classList.add('invisible');
        tooltip.classList.remove('opacity-100');
      }, 150);
    };
    
    button.addEventListener('mouseenter', showTooltip);
    button.addEventListener('mouseleave', hideTooltip);
    button.addEventListener('focus', showTooltip);
    button.addEventListener('blur', hideTooltip);
    
    button.addEventListener('click', (e) => {
      e.preventDefault();
      showTooltip();
      setTimeout(hideTooltip, 3000);
    });
  });
}

/* Enhanced contact form with better validation and UX */
function bindEnhancedContactForm() {
  if (!dom.contactForm) return;
  
  const inputs = dom.contactForm.querySelectorAll('input, textarea');
  
  // Enhanced input validation
  inputs.forEach(input => {
    input.addEventListener('blur', validateField);
    input.addEventListener('input', clearFieldError);
  });
  
  function validateField(e) {
    const field = e.target;
    const value = field.value.trim();
    
    // Remove existing error styling
    field.classList.remove('border-red-500');
    
    let isValid = true;
    
    if (field.hasAttribute('required') && !value) {
      isValid = false;
    } else if (field.type === 'email' && value) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      isValid = emailRegex.test(value);
    }
    
    if (!isValid) {
      field.classList.add('border-red-500');
    }
  }
  
  function clearFieldError(e) {
    e.target.classList.remove('border-red-500');
  }
  
  dom.contactForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const submitButton = document.getElementById('submit-btn');
    const formData = new FormData(dom.contactForm);
    
    // Honeypot check
    if (formData.get('honey')) {
      dom.formStatus.innerHTML = '<span class="text-red-400">❌ Bot detected.</span>';
      return;
    }
    
    // Validate all fields
    let isFormValid = true;
    inputs.forEach(input => {
      validateField({ target: input });
      if (input.classList.contains('border-red-500')) {
        isFormValid = false;
      }
    });
    
    if (!isFormValid) {
      dom.formStatus.innerHTML = '<span class="text-red-400">❌ Please fix the errors above.</span>';
      return;
    }
    
    // Submit form
    submitButton.disabled = true;
    submitButton.innerHTML = '<i data-lucide="loader" class="w-4 h-4 inline mr-2 animate-spin"></i>Sending...';
    dom.formStatus.innerHTML = '<span class="text-blue-400">📤 Sending message...</span>';
    
    try {
      const response = await fetch(GOOGLE_SHEETS_URL, {
        method: 'POST',
        body: formData
      });
      
      if (!response.ok) throw new Error('Network response was not ok');
      
      dom.formStatus.innerHTML = '<span class="text-green-400">✅ Message sent successfully! I\'ll get back to you soon.</span>';
      dom.contactForm.reset();
      
      // Auto-clear success message
      setTimeout(() => {
        dom.formStatus.textContent = '';
      }, 5000);
      
    } catch (error) {
      console.error('Contact form error:', error);
      dom.formStatus.innerHTML = '<span class="text-red-400">❌ Failed to send message. Please try again later.</span>';
    } finally {
      submitButton.disabled = false;
      submitButton.innerHTML = '<i data-lucide="send" class="w-4 h-4 inline mr-2"></i>Send Message';
      if (typeof lucide !== 'undefined') lucide.createIcons();
    }
  });
}

/* Enhanced hire modal with better animations and focus management */
let lastFocusedElement = null;

function openHireModal() {
  lastFocusedElement = document.activeElement;
  dom.hireModal.classList.remove('hidden');
  document.body.classList.add('modal-open');
  
  // Animate modal appearance
  requestAnimationFrame(() => {
    dom.hireInner.classList.remove('scale-95');
    dom.hireInner.classList.add('scale-100');
    dom.hireInner.style.opacity = '1';
  });
  
  // Focus management
  setTimeout(() => {
    dom.contactAnyway?.focus();
  }, 150);
  
  // Trap focus within modal
  trapFocus(dom.hireModal);
}

function closeHireModal() {
  dom.hireInner.style.opacity = '0';
  dom.hireInner.classList.remove('scale-100');
  dom.hireInner.classList.add('scale-95');
  
  setTimeout(() => {
    dom.hireModal.classList.add('hidden');
    document.body.classList.remove('modal-open');
    if (lastFocusedElement) {
      lastFocusedElement.focus();
    }
  }, 200);
}

function trapFocus(container) {
  const focusableElements = container.querySelectorAll(
    'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
  );
  
  if (!focusableElements.length) return;
  
  const firstElement = focusableElements[0];
  const lastElement = focusableElements[focusableElements.length - 1];
  
  function handleKeyDown(e) {
    if (e.key === 'Tab') {
      if (e.shiftKey && document.activeElement === firstElement) {
        e.preventDefault();
        lastElement.focus();
      } else if (!e.shiftKey && document.activeElement === lastElement) {
        e.preventDefault();
        firstElement.focus();
      }
    } else if (e.key === 'Escape') {
      closeHireModal();
      container.removeEventListener('keydown', handleKeyDown);
    }
  }
  
  container.addEventListener('keydown', handleKeyDown);
}

// Modal event listeners
dom.closeModal?.addEventListener('click', closeHireModal);
dom.hireModal?.addEventListener('click', (e) => {
  if (e.target === dom.hireModal) closeHireModal();
});
dom.contactAnyway?.addEventListener('click', () => {
  closeHireModal();
  setTimeout(() => {
    document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' });
    setTimeout(() => {
      document.getElementById('name')?.focus();
    }, 800);
  }, 300);
});

/* Enhanced profile image tilt with realistic 3D effect */
function bindProfileTilt() {
  const frame = document.getElementById('photo-frame');
  if (!frame) return;
  
  let isHovering = false;
  
  frame.addEventListener('mouseenter', () => {
    isHovering = true;
  });
  
  frame.addEventListener('mouseleave', () => {
    isHovering = false;
    frame.style.transform = '';
  });
  
  frame.addEventListener('mousemove', (e) => {
    if (!isHovering) return;
    
    const rect = frame.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    const mouseX = e.clientX - centerX;
    const mouseY = e.clientY - centerY;
    
    const rotateX = (mouseY / rect.height) * -15;
    const rotateY = (mouseX / rect.width) * 15;
    
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(20px)
    `;
  });
  
  // Touch support for mobile
  frame.addEventListener('touchmove', (e) => {
    e.preventDefault();
    const touch = e.touches[0];
    const rect = frame.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    const mouseX = touch.clientX - centerX;
    const mouseY = touch.clientY - centerY;
    
    const rotateX = (mouseY / rect.height) * -10;
    const rotateY = (mouseX / rect.width) * 10;
    
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(10px)
    `;
  });
  
  frame.addEventListener('touchend', () => {
    frame.style.transform = '';
  });
}

/* Enhanced scroll animations with stagger effects */
function initScrollAnimations() {
  if (!('IntersectionObserver' in window)) {
    // Fallback for older browsers
    document.querySelectorAll('section').forEach(section => {
      section.classList.add('animate-in');
    });
    return;
  }
  
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        // Stagger animation for child elements
        const children = entry.target.querySelectorAll('.project-card, .tech-item');
        children.forEach((child, childIndex) => {
          setTimeout(() => {
            child.style.opacity = '1';
            child.style.transform = 'translateY(0) scale(1)';
          }, childIndex * 100);
        });
        
        entry.target.classList.add('animate-in');
      }
    });
  }, observerOptions);
  
  document.querySelectorAll('section').forEach(section => {
    observer.observe(section);
  });
}

/* Typing animation for hero text */
function initTypingAnimation() {
  const typingElement = document.querySelector('.typing-animation');
  if (!typingElement) return;
  
  // Remove typing animation class after animation completes
  setTimeout(() => {
    typingElement.classList.remove('typing-animation');
    typingElement.style.borderRight = 'none';
  }, 3000);
}

/* Enhanced Three.js scene with better performance and effects */
let three = { 
  renderer: null, 
  scene: null, 
  camera: null, 
  animationId: null, 
  isRunning: false, 
  particles: null, 
  techGroup: null,
  mouseX: 0,
  mouseY: 0
};

function initThreeScene() {
  // Check for reduced motion preference
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const isSmallScreen = window.innerWidth < 768;
  
  if (!THREE || prefersReducedMotion || isSmallScreen) {
    showThreeFallback();
    return;
  }
  
  try {
    const canvas = document.getElementById('three-canvas');
    if (!canvas) return;
    
    // Scene setup
    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x000000, 0.002);
    
    // Renderer setup with optimizations
    const renderer = new THREE.WebGLRenderer({ 
      canvas, 
      antialias: true, 
      alpha: true,
      powerPreference: 'high-performance'
    });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(canvas.clientWidth, canvas.clientHeight);
    renderer.setClearColor(0x000000, 0);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    
    // Camera setup
    const camera = new THREE.PerspectiveCamera(
      60, 
      canvas.clientWidth / canvas.clientHeight, 
      0.1, 
      1000
    );
    camera.position.set(0, 8, 32);
    
    // Enhanced lighting setup
    const ambientLight = new THREE.AmbientLight(0x404040, 1.2);
    const keyLight = new THREE.PointLight(0xffd700, 2, 100);
    keyLight.position.set(20, 25, 25);
    keyLight.castShadow = true;
    keyLight.shadow.mapSize.width = 2048;
    keyLight.shadow.mapSize.height = 2048;
    
    const rimLight = new THREE.PointLight(0x00aaff, 1, 100);
    rimLight.position.set(-15, -15, 35);
    
    const fillLight = new THREE.PointLight(0xff6600, 0.5, 50);
    fillLight.position.set(0, -20, 20);
    
    scene.add(ambientLight, keyLight, rimLight, fillLight);
    
    // Enhanced tech group
    const techGroup = new THREE.Group();
    
    // Main circuit board
    const boardGeometry = new THREE.BoxGeometry(12, 1, 10);
    const boardMaterial = new THREE.MeshPhongMaterial({ 
      color: 0x0a1a0a,
      shininess: 30,
      transparent: true,
      opacity: 0.9
    });
    const board = new THREE.Mesh(boardGeometry, boardMaterial);
    board.position.set(0, -2, 0);
    board.receiveShadow = true;
    techGroup.add(board);
    
    // Circuit traces
    const traceMaterial = new THREE.MeshPhongMaterial({ 
      color: 0x00ff88,
      emissive: 0x003322,
      shininess: 100
    });
    
    for (let i = 0; i < 12; i++) {
      const trace = new THREE.Mesh(
        new THREE.BoxGeometry(0.2, 0.05, 8),
        traceMaterial
      );
      trace.position.set(
        (i - 6) * 0.8,
        -1.5,
        (Math.random() - 0.5) * 2
      );
      trace.rotation.y = (Math.random() - 0.5) * 0.3;
      techGroup.add(trace);
    }
    
    // CPU chips with enhanced materials
    const cpuMaterial = new THREE.MeshPhongMaterial({
      color: 0x1a1a2e,
      emissive: 0x0f4c75,
      emissiveIntensity: 0.3,
      shininess: 50
    });
    
    for (let i = 0; i < 6; i++) {
      const size = 1 + Math.random() * 1.5;
      const cpu = new THREE.Mesh(
        new THREE.BoxGeometry(size, size, size),
        cpuMaterial
      );
      cpu.position.set(
        (Math.random() - 0.5) * 8,
        -0.5 + size * 0.5,
        (Math.random() - 0.5) * 6
      );
      cpu.rotation.set(
        Math.random() * 0.5,
        Math.random() * Math.PI,
        Math.random() * 0.5
      );
      cpu.castShadow = true;
      techGroup.add(cpu);
    }
    
    // Outer orbital ring
    const ringGeometry = new THREE.TorusGeometry(16, 0.2, 16, 100);
    const ringMaterial = new THREE.MeshPhongMaterial({
      color: 0x333333,
      emissive: 0xffaa00,
      emissiveIntensity: 0.4,
      transparent: true,
      opacity: 0.8
    });
    const ring = new THREE.Mesh(ringGeometry, ringMaterial);
    ring.rotation.x = -0.4;
    ring.position.y = 2;
    techGroup.add(ring);
    
    // Data flow particles
    const particleCount = 800;
    const particleGeometry = new THREE.BufferGeometry();
    const particlePositions = new Float32Array(particleCount * 3);
    const particleVelocities = new Float32Array(particleCount * 3);
    
    for (let i = 0; i < particleCount; i++) {
      const i3 = i * 3;
      particlePositions[i3] = (Math.random() - 0.5) * 150;
      particlePositions[i3 + 1] = (Math.random() - 0.5) * 50;
      particlePositions[i3 + 2] = (Math.random() - 0.5) * 150;
      
      particleVelocities[i3] = (Math.random() - 0.5) * 0.02;
      particleVelocities[i3 + 1] = (Math.random() - 0.5) * 0.01;
      particleVelocities[i3 + 2] = (Math.random() - 0.5) * 0.02;
    }
    
    particleGeometry.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
    
    const particleMaterial = new THREE.PointsMaterial({
      color: 0xffd700,
      size: 0.8,
      transparent: true,
      opacity: 0.7,
      blending: THREE.AdditiveBlending
    });
    
    const particles = new THREE.Points(particleGeometry, particleMaterial);
    
    scene.add(techGroup, particles);
    
    // Store references
    three.renderer = renderer;
    three.scene = scene;
    three.camera = camera;
    three.particles = particles;
    three.techGroup = techGroup;
    three.particleVelocities = particleVelocities;
    three.isRunning = true;
    
    // Mouse interaction
    let targetMouseX = 0, targetMouseY = 0;
    
    function onMouseMove(event) {
      targetMouseX = (event.clientX / window.innerWidth) * 2 - 1;
      targetMouseY = -(event.clientY / window.innerHeight) * 2 + 1;
    }
    
    window.addEventListener('mousemove', throttle(onMouseMove, 16), { passive: true });
    
    // Animation loop
    let lastTime = 0;
    function animate(currentTime) {
      const deltaTime = currentTime - lastTime;
      lastTime = currentTime;
      
      // Smooth mouse following
      three.mouseX = lerp(three.mouseX, targetMouseX, 0.05);
      three.mouseY = lerp(three.mouseY, targetMouseY, 0.05);
      
      // Rotate tech group
      techGroup.rotation.y += 0.002;
      techGroup.rotation.x = three.mouseY * 0.1;
      techGroup.rotation.z = three.mouseX * 0.05;
      
      // Animate particles
      const positions = particles.geometry.attributes.position.array;
      for (let i = 0; i < particleCount; i++) {
        const i3 = i * 3;
        
        positions[i3] += three.particleVelocities[i3];
        positions[i3 + 1] += three.particleVelocities[i3 + 1];
        positions[i3 + 2] += three.particleVelocities[i3 + 2];
        
        // Reset particles that go too far
        if (Math.abs(positions[i3]) > 75) {
          positions[i3] = (Math.random() - 0.5) * 150;
          positions[i3 + 1] = (Math.random() - 0.5) * 50;
          positions[i3 + 2] = (Math.random() - 0.5) * 150;
        }
      }
      particles.geometry.attributes.position.needsUpdate = true;
      
      // Gentle floating animation
      techGroup.position.y = Math.sin(currentTime * 0.0008) * 0.8;
      
      renderer.render(scene, camera);
      
      if (three.isRunning) {
        three.animationId = requestAnimationFrame(animate);
      }
    }
    
    three.animationId = requestAnimationFrame(animate);
    
    // Handle resize
    function onWindowResize() {
      const width = canvas.clientWidth;
      const height = canvas.clientHeight;
      
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      
      renderer.setSize(width, height);
    }
    
    window.addEventListener('resize', debounce(onWindowResize, 250));
    
    // Pause animation when hero section is not visible
    const heroObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !three.isRunning) {
          three.isRunning = true;
          three.animationId = requestAnimationFrame(animate);
        } else if (!entry.isIntersecting && three.isRunning) {
          three.isRunning = false;
          if (three.animationId) {
            cancelAnimationFrame(three.animationId);
          }
        }
      });
    }, { threshold: 0.1 });
    
    const heroSection = document.getElementById('hero');
    if (heroSection) {
      heroObserver.observe(heroSection);
    }
    
  } catch (error) {
    console.warn('Three.js initialization failed:', error);
    showThreeFallback();
  }
}

function showThreeFallback() {
  const canvas = document.getElementById('three-canvas');
  const fallback = document.getElementById('three-fallback');
  
  if (canvas) canvas.style.display = 'none';
  if (fallback) fallback.classList.remove('hidden');
}

/* Utility functions */
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

function lerp(start, end, factor) {
  return start + (end - start) * factor;
}

function throttle(func, limit) {
  let inThrottle;
  return function() {
    const args  = arguments;
    const context = this;       
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
    };
}
function debounce(func, delay) {
  let debounceTimer;
  return function() {
    const context = this;
    const args = arguments;
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(() => func.apply(context, args), delay);
  };
}
/* Initial loading sequence with progress bar */
function initLoadingSequence() {
    if (!dom.progressBar || !dom.progressContainer) return;
    
    let startTime = performance.now();
    let progress = 0;
    
    function updateProgress(timestamp) {
        const elapsed = timestamp - startTime;
        const targetProgress = Math.min(elapsed / 3000, 1); // 3 seconds to full
        
        progress += (targetProgress - progress) * 0.1; // Smooth easing
        dom.progressBar.style.width = `${(progress * 100).toFixed(2)}%`;
        
        if (progress < 0.995) {
        requestAnimationFrame(updateProgress);
        } else {
        // Complete loading
        dom.progressBar.style.width = '100%';
        setTimeout(() => {
            dom.progressContainer.classList.add('opacity-0');
            setTimeout(() => {
            dom.progressContainer.classList.add('hidden');
            // Initialize other components after loading
            bindEnhancedNav();
            renderEnhancedProjects();
            renderEnhancedTechStack();
            bindProjectFilters();
            bindEnhancedSocialTooltips();
            bindEnhancedContactForm();
            bindProfileTilt();
            initScrollAnimations();
            initTypingAnimation();
            init
            initThreeScene();
            }, 500);
        }, 300);
        }
    }
    requestAnimationFrame(updateProgress);
}
function bindEnhancedNav() {
  // Smooth scrolling for nav links
  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const targetId = link.getAttribute('href').substring(1);
      const targetSection = document.getElementById(targetId);
      if (targetSection) {
        targetSection.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });

  // Highlight active nav link on scroll
  const navLinks = document.querySelectorAll('.nav-link'); 
    const sections = Array.from(navLinks).map(link => {
        const id = link.getAttribute('href').substring(1);
        return document.getElementById(id);
    });
    
    function highlightActiveNav() {
        const scrollPosition = window.scrollY + window.innerHeight / 3;
    
        sections.forEach((section, index) => {
        const link = navLinks[index];
        if (section.offsetTop <= scrollPosition && (section.offsetTop + section.offsetHeight) > scrollPosition) {
            link.classList.add('text-amber-400');
            link.classList.remove('text-slate-300');
        } else {
            link.classList.remove('text-amber-400');
            link.classList.add('text-slate-300');       
        }
        });
    }   
    window.addEventListener('scroll', debounce(highlightActiveNav, 100));
    highlightActiveNav();
}
function renderEnhancedProjects() {
  if (!dom.projectsGrid) return;
  
  dom.projectsGrid.innerHTML = '';
  
  projectsData.forEach((project, index) => {
    const card = document.createElement('div');
    card.className = 'project-card bg-slate-800 border border-slate-700 rounded-2xl p-6 shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-out opacity-0 translate-y-10';
    card.setAttribute('data-category', project
.category);
    card.style.animationDelay = `${index * 100}ms`; 
    card.style.animationFillMode = 'forwards';
    card.style.animationName = 'fadeInUp';
    card.style.animationDuration = '0.6s';
    card.style.animationTimingFunction = 'ease-out';

    const header = document.createElement('div');
    header.className = 'flex items-center gap-4 mb-4';
    const iconContainer = document.createElement('div');    
    iconContainer.className = 'relative';
    const iconWrapper = document.createElement('div');
    iconWrapper.className = 'w-12 h-12 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg';
    const icon = document.createElement('img');
    icon.src = project.icon;
    icon.alt = project.title + ' icon';
    icon.className = 'w-8 h-8 object-contain filter drop-shadow-sm';
    icon.onerror = function() {
      // Fallback to Lucide icon if image fails
      this.style.display = 'none';
      const fallbackIcon = document.createElement('i');
      fallbackIcon.dataset.lucide = 'folder';
      fallbackIcon.className = 'w-6 h-6 text-slate-400';
      iconWrapper.appendChild(fallbackIcon);
      if (typeof lucide !== 'undefined') lucide.createIcons();
    };


    iconWrapper.appendChild(icon);
    iconContainer.appendChild(iconWrapper);
    header.appendChild(iconContainer);
    const titleGroup = document.createElement('div');
    const title = document.createElement('h3');
    title.className = 'text-lg font-bold text-white';
    title.textContent = project.title;
    const date = document.createElement('div');




    date.className = 'text-sm text-slate-400';
    date.textContent = project.date;
    titleGroup.appendChild(title);

    titleGroup.appendChild(date);
    header.appendChild(titleGroup);

    const description = document.createElement('p');
    description.className = 'text-slate-300 mb-4';
    description.innerHTML = escapeHtml(project.description);
    // Description with preserved line breaks
    description.innerHTML = project.description.split('\n').map(line => escapeHtml(line)).join('<br>');
    const techContainer = document.createElement('div');
    techContainer.className = 'mb-4';
    const techLabel = document.createElement('div');
    techLabel.className = 'text-sm text-slate-400 mb-2';
    techLabel.textContent = 'Tech Stack';
    const techGrid = document.createElement('div');
    techGrid.className = 'flex flex-wrap gap-2';

    project.tech.forEach(tech => {
      const techBadge = document.createElement('span');
      techBadge.className = 'px-2 py-1 bg-slate-700/20 text-slate-300 rounded-full text-xs font-medium';
      techBadge.textContent = tech;
      techGrid.appendChild(techBadge);
    });
    techContainer.appendChild(techLabel);
    techContainer.appendChild(techGrid);
    const footer = document.createElement('div');
    footer.className = 'flex items-center justify-between';
    const links = document.createElement('div');
    links.className = 'flex items-center gap-4';
    const demoLink = document.createElement('a');       
    demoLink.href = project.demo || '#';                    
    demoLink.target = '_blank';                 
    demoLink.rel = 'noopener noreferrer';

    demoLink.className = `flex items-center gap-1 text-sm font-medium ${
      project.demo ? 'text-amber-400 hover:text-amber-500' : 'text-slate-600 cursor-not-allowed'
    }`;
    demoLink.innerHTML = `<i data-lucide="external-link" class="w-4 h-4"></i> Live Demo`;
    if (!project.demo) {
      demoLink.addEventListener('click', (e) => e.preventDefault());
    }
    const repoLink = document.createElement('a');
    repoLink.href = project.repo || '#';
    repoLink.target = '_blank';
    repoLink.rel = 'noopener noreferrer';
    repoLink.className = `flex items-center gap-1 text-sm font-medium ${
      project.repo ? 'text-amber-400 hover:text-amber-500' : 'text-slate-600 cursor-not-allowed'
    }`;
    repoLink.innerHTML = `<i data-lucide="github" class="w-4 h-4"></i> Source Code`;
    if (!project.repo) {
      repoLink.addEventListener('click', (e) => e.preventDefault());
    }
    links.appendChild(demoLink);
    links.appendChild(repoLink);
    footer.appendChild(links);
    card.appendChild(header);
    card.appendChild(description);
    card.appendChild(techContainer);
    card.appendChild(footer);

    dom.projectsGrid.appendChild(card);
    });
    if (typeof lucide !== 'undefined') lucide.createIcons();
}
function renderEnhancedTechStack() {
  if (!dom.techGrid) return;
  
  dom.techGrid.innerHTML = '';
  
  techStackData.forEach((tech, index) => {
    const item = document.createElement('div');
    item.className = 'tech-item bg-slate-800 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-out opacity-0 translate-y-10';
    item.style.animationDelay = `${index * 100}ms`;
    item.style.animationFillMode = 'forwards';
    item.style.animationName = 'fadeInUp';
    item.style.animationDuration = '0.6s';
    item.style.animationTimingFunction = 'ease-out';
    // Tech icon
    const iconContainer = document.createElement('div');
    iconContainer.className = 'w-16 h-16 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg flex-shrink-0';
    const icon = document.createElement('img');
    icon.src = tech.icon;
    icon.alt = tech.name + ' icon';
    icon.className = 'w-10 h-10 object-contain filter drop-shadow-sm';
    icon.onerror = function() {
      // Fallback to Lucide icon if image fails
      this.style.display = 'none';
      const fallbackIcon = document.createElement('i');
      fallbackIcon.dataset.lucide = 'cpu';
      fallbackIcon.className = 'w-8 h-8 text-slate-400';
      iconContainer.appendChild(fallbackIcon);
      if (typeof lucide !== 'undefined') lucide.createIcons();
    };
    iconContainer.appendChild(icon);
    const info = document.createElement('div');
    info.className = 'flex-1';
    const name = document.createElement('h3');
    name.className = 'text-lg font-bold text-white mb-1';
    name.textContent = tech.name;
    const level = document.createElement('div');
    level.className = 'text-sm text-slate-400 mb-2';
    level.textContent = `Proficiency: ${tech.level}`;
    const experience = document.createElement('div');
    experience.className = 'text-sm text-slate-400 mb-4';
    experience.textContent = `Experience: ${tech.experience}`;
    const skillBar = document.createElement('div');
    skillBar.className = 'w-full h-3 bg-slate-700 rounded-full overflow-hidden';
    const skillFill = document.createElement('div');
    skillFill.className = 'h-3 bg-amber-400 rounded-full transition-all duration-1000 ease-out';
    skillFill.style.width = '0%';
    // Animate skill fill
    setTimeout(() => {
      skillFill.style.width = tech.proficiency;
    }, 100);
    skillBar.appendChild(skillFill);
    info.appendChild(name);
    info.appendChild(level);
    info.appendChild(experience);
    info.appendChild(skillBar);
    item.appendChild(iconContainer);
    item.appendChild(info);
    dom.techGrid.appendChild(item);
    });
    if (typeof lucide !== 'undefined') lucide.createIcons();
}
function bindProjectFilters() {
  const filterButtons = document.querySelectorAll('.filter-btn');
  if (!filterButtons.length) return;
  
  filterButtons.forEach(button => {
    button.addEventListener('click', (e) => {
      // Update active button
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('bg-slate-700');
        btn.classList.add('bg-slate-800');
      });
      e.currentTarget.classList.add('bg-slate-700');
      e.currentTarget.classList.remove('bg-slate-800');
      
      const filterValue = e.currentTarget.getAttribute('data-filter');
      const projects = document.querySelectorAll('[data-category]');
      
      projects.forEach((project, index) => {
        const shouldShow = filterValue === 'all' || project.getAttribute('data-category') === filterValue;
        
        if (shouldShow) {
          project.style.display = '';
          project.style.animation = `fadeInUp 0.6s ease forwards ${index * 0.1}s`;
        } else {
          project.style.animation = 'fadeOut 0.3s ease forwards';
          setTimeout(() => {
            project.style.display = 'none';
          }, 300);
        }
      });
    });
  });
}
function bindEnhancedSocialTooltips() {
  const tooltipElements = [
    { button: dom.emailBtn, tooltip: dom.emailTip },
    { button: dom.githubBtn, tooltip: dom.githubTip },
    { button: dom.linkedInBtn, tooltip: dom.linkedInTip },
    { button: dom.twitterBtn, tooltip: dom.twitterTip },
    { button: dom.instaBtn, tooltip: dom.instaTip }
  ];
    tooltipElements.forEach(({ button, tooltip }) => {
        if (!button || !tooltip) return;
        
        let hideTimeout;
        
        const showTooltip = () => {
        if (hideTimeout) clearTimeout(hideTimeout);
        tooltip.classList.remove('invisible');
        tooltip.classList.add('opacity-100');
        tooltip.style.transform = 'translateY(0) scale(1)';
        };
        const hideTooltip = () => {
        tooltip.classList.add('opacity-0');
        tooltip.style.transform = 'translateY(10px) scale(0.95)';
        hideTimeout = setTimeout(() => {
            tooltip.classList.add('invisible');
        }, 300);
        };
        button.addEventListener('mouseenter', showTooltip);
        button.addEventListener('focus', showTooltip);
        button.addEventListener('mouseleave', hideTooltip);
        button.addEventListener('blur', hideTooltip);
    });
}
function bindEnhancedContactForm() {
  if (!dom.contactForm) return;
  
  const inputs = dom.contactForm.querySelectorAll('input, textarea');
  
  inputs.forEach(input => {
    input.addEventListener('blur', validateField);
    input.addEventListener('input', clearFieldError);
    });

    function validateField(e) {
    const field = e.target;
    const value = field.value.trim();
    let isValid = true;
    if (field.hasAttribute('required') && !value) {
      isValid = false;
    } else if (field.type === 'email') {
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(value)) {
            isValid = false;
        }
    } else if (field.id === 'message' && value.length < 10) {
        isValid = false;
    }
    if (!isValid) {
      field.classList.add('border-red-500');
      field.classList.remove('border-green-500');
      field.nextElementSibling?.classList.remove('hidden');
    } else {
      field.classList.remove('border-red-500');
      field.classList.add('border-green-500');
      field.nextElementSibling?.classList.add('hidden');
    }
    return isValid;
    }
    function clearFieldError(e) {
    const field = e.target;
    field.classList.remove('border-red-500');
    field.nextElementSibling?.classList.add('hidden');
    }
    dom.contactForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const submitButton = dom.contactForm.querySelector('button[type="submit"]');
    if (!submitButton) return;
    let formIsValid = true;
    inputs.forEach(input => {
      if (!validateField({ target: input })) {
        formIsValid = false;
      }
    });
    if (!formIsValid) {
      dom.formStatus.innerHTML = '<span class="text-red-400">❌ Please correct the errors in the form.</span>';
      return;
    }
    submitButton.disabled = true;
    submitButton.innerHTML = '<i data-lucide="loader" class="w-4 h-4 inline mr-2 animate-spin"></i>Sending...';
    if (typeof lucide !== 'undefined') lucide.createIcons();
    dom.formStatus.textContent = '';
    const formData = {
      name: dom.contactForm.name.value.trim(),
      email: dom.contactForm.email.value.trim(),
      subject: dom.contactForm.subject.value.trim(),
      message: dom.contactForm.message.value.trim()
    };
    try {
      const response = await fetch('https://formspree.io/f/your-form-id', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: JSON.stringify(formData)
      });
      if (response.ok) {
        dom.formStatus.innerHTML = '<span class="text-green-400">✅ Message sent successfully!</span>';
        dom.contactForm.reset();
        inputs.forEach(input => {
          input.classList.remove('border-green-500');
        });
        } else {
        const errorData = await response.json();
        dom.formStatus.innerHTML = `<span class="text-red-400">❌ ${escapeHtml(errorData.error || 'An error occurred while sending your message.')}</span>`;
        }
    } catch (error) {
        dom.formStatus.innerHTML = `<span class="text-red-400">❌ An error occurred: ${escapeHtml(error.message)}</span>`;
    } finally {
        submitButton.disabled = false;
        submitButton.innerHTML = 'Send Message';
        if (typeof lucide !== 'undefined') lucide.createIcons();
    }
    });
}

let lastFocusedElement = null;
function openHireModal() {
    lastFocusedElement = document.activeElement;
    dom.hireModal.classList.remove('hidden');
    setTimeout(() => {
        dom.hireModal.classList.remove('opacity-0');
        dom.hireModal.classList.remove('scale-95');
        dom.hireModal.classList.add('opacity-100');
        dom.hireModal.classList.add('scale-100');
        document.body.classList.add('modal-open');
        // Focus the first focusable element in the modal
        const focusableElements = dom.hireModal.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        if (focusableElements.length) {
        focusableElements[0].focus();
        }
        trapFocus(dom.hireModal);
    }, 50);
}
function closeHireModal() {
    dom.hireModal.classList.add('opacity-0');
    dom.hireModal.classList.add('scale-95');
    dom.hireModal.classList.remove('opacity-100');
    dom.hireModal.classList.remove('scale-100');
    document.body.classList.remove('modal-open');
    setTimeout(() => {
        dom.hireModal.classList.add('hidden');
        // Return focus to the last focused element before modal opened
        if (lastFocusedElement) lastFocusedElement.focus();
    }, 300);
}
function trapFocus(element) {
    const focusableElements = element.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    );
    const firstElement = focusableElements[0];
    const lastElement = focusableElements[focusableElements.length - 1];
    
    element.addEventListener('keydown', (e) => {
        if (e.key === 'Tab') {
            if (e.shiftKey) { // Shift + Tab
                if (document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                }
            } else { // Tab
                if (document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            }
        } else if (e.key === 'Escape') {
            closeHireModal();
        }
    });
}
function bindProfileTilt() {
  if (!dom.profileFrame) return;
  
  const frame = dom.profileFrame;
  
  frame.addEventListener('mousemove', (e) => {
    const rect = frame.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    const mouseX = e.clientX - centerX;
    const mouseY = e.clientY - centerY;
    const rotateX = (mouseY / rect.height) * -10;
    const rotateY = (mouseX / rect.width) * 10;
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(10px)
    `;
    });

    frame.addEventListener('mouseleave', () => {
    frame.style.transform = '';
    });
    frame.addEventListener('touchmove', (e) => {
    if (e.touches.length !== 1) return;
    const touch = e.touches[0];
    const rect = frame.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    const mouseX = touch.clientX - centerX;
    const mouseY = touch.clientY - centerY;
    const rotateX = (mouseY / rect.height) * -10;
    const rotateY = (mouseX / rect.width) * 10;
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(10px)
    `;
    }, { passive: true });
    frame.addEventListener('touchend', () => {
    frame.style.transform = '';
    });
}
function initScrollAnimations() {
  const observerOpt
ions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
    };
    const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Animate child elements with staggered delay
        const children = entry.target.querySelectorAll('.project-card, .tech-item, .section-title, .section-subtitle, .section-content > *');
        children.forEach((child, childIndex) => {
          setTimeout(() => {
            child.style.opacity = '1';
            child.style.transform = 'translateX(0) translateY(0) scale(1)';
            child.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            child.style.transform = 'translateX(0) translateY(0) scale(1)';
          }, childIndex * 100); 
        });
        observer.unobserve(entry.target); // Animate only once
        }
        });
    }, observerOptions);
    document.querySelectorAll('.section').forEach(section => {
    observer.observe(section);
    });
}
function initTypingAnimation() {
  if (!dom.typingText) return;
  
  const phrases = [
    'Full-Stack Developer',
    'Open Source Enthusiast',
    'Tech Blogger',
    'UI/UX Advocate',
    'Lifelong Learner'
  ];
  let currentPhraseIndex = 0;
  let currentCharIndex = 0;
  let isDeleting = false;
  const typingSpeed = 100;
  const deletingSpeed = 50;
  const pauseDuration = 2000; // Pause before deleting
  
  const typingElement = dom.typingText;
  
  function type() {
    const currentPhrase = phrases[currentPhraseIndex];
    
    if (isDeleting) {
      currentCharIndex--;
      typingElement.textContent = currentPhrase.substring(0, currentCharIndex);
      
      if (currentCharIndex <= 0) {
        isDeleting = false;
        currentPhraseIndex = (currentPhraseIndex + 1) % phrases.length;
        setTimeout(type, 500); // Pause before typing next phrase
      } else {
        setTimeout(type, deletingSpeed);
      }
    } else {
      currentCharIndex++;
      typingElement.textContent = currentPhrase.substring(0, currentCharIndex);
      
      if (currentCharIndex >= currentPhrase.length) {
        isDeleting = true;
        setTimeout(type, pauseDuration);
      } else {
        setTimeout(type, typingSpeed);
      }
    }
  }
  
  typingElement.classList.add('typing-animation');
  type();
  
  // Remove cursor after a few cycles
  setTimeout(() => {
    typingElement.classList.remove('typing-animation');
  }, phrases.length * (typingSpeed + deletingSpeed) * 10);
}function initThreeScene() {
  if (!dom.threeCanvas) return; 
    const canvas = dom.threeCanvas;
    const three = { mouseX: 0, mouseY: 0 };
    try {
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setSize(canvas.clientWidth, canvas.clientHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
    camera.position.set(0, 5, 25);
    camera.lookAt(0, 0, 0);
    // Lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);
    scene.add(ambientLight);
    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
    directionalLight.position.set(10, 20, 10);
    directionalLight.castShadow = true;
    directionalLight.shadow.mapSize.width = 1024;
    directionalLight.shadow.mapSize.height = 1024;
    directionalLight.shadow.camera.near = 0.5;
    directionalLight.shadow.camera.far = 50;
    scene.add(directionalLight);
    const pointLight = new THREE.PointLight(0xffaa00, 0.5, 50);
    pointLight.position.set(-10, 10, -10);
    scene.add(pointLight);
    // Tech-themed objects group
    const techGroup = new THREE.Group();
    // Circuit traces
    const traceMaterial = new THREE.MeshPhongMaterial({
      color: 0x00ffcc,
      emissive: 0x00ffcc,
      emissiveIntensity: 0.5,
      shininess: 30
    });

    for (let i = 0; i < 30; i++) {
      const length = 2 + Math.random() * 4;
      const width = 0.05 + Math.random() * 0.1;
      const height = 0.02;
      const trace = new THREE.Mesh(
        new THREE.BoxGeometry(length, height, width),
        traceMaterial
      );
      trace.position.set(
        (Math.random() - 0.5) * 10,
        -0.5,
        (Math.random() - 0.5) * 8
      );
      trace.rotation.y = Math.random() * Math.PI;
      trace.castShadow = true;
      trace.receiveShadow = true;
      // Slightly elevate some traces for depth
      trace.position.y += (Math.random() - 0.5) * 0.2;
        techGroup.add(trace);
    }
    // CPU-like components
    const cpuMaterial = new THREE.MeshPhongMaterial({
      color: 0x5555ff,
      emissive: 0x5555ff,
      emissiveIntensity: 0.3,
      shininess: 50
    });
    for (let i = 0; i < 5; i++) {
      const size = 1 + Math.random() * 1.5;
      const cpu = new THREE.Mesh(
        new THREE.BoxGeometry(size, 0.3, size),
        cpuMaterial
      );
      cpu.position.set(
        (Math.random() - 0.5) * 8,
        0,
        (Math.random() - 0.5) * 6
      );
      cpu.castShadow = true;
      cpu.receiveShadow = true;
      techGroup.add(cpu);
    }
    // Spheres representing nodes
    const nodeMaterial = new THREE.MeshPhongMaterial({
      color: 0xff5555,
      emissive: 0xff5555,
      emissiveIntensity: 0.4,
      shininess: 60
    }); 
    for (let i = 0; i < 20; i++) {
      const radius = 0.1 + Math.random() * 0.3;
      const node = new THREE.Mesh(
        new THREE.SphereGeometry(radius, 16, 16),
        nodeMaterial
      );
      node.position.set(
        (Math.random() - 0.5) * 10,
        (Math.random() - 0.5) * 2,
        (Math.random() - 0.5) * 8
      );
      node.castShadow = true;
      node.receiveShadow = true;
      techGroup.add(node);
    }
    // Ground plane
    const groundMaterial = new THREE.ShadowMaterial({ opacity: 0.2 });
    const ground = new THREE.Mesh(
      new THREE.PlaneGeometry(200, 200),
      groundMaterial
    );  
    ground.rotation.x = -Math.PI / 2;
    ground.position.y = -0.6;
    ground.receiveShadow = true;
    scene.add(ground);
    // Particle system
    const particleCount = 300;
    const particleGeometry = new THREE.BufferGeometry();
    const positions = new Float32Array(particleCount * 3);
    const particleVelocities = new Float32Array(particleCount * 3);
    for (let i = 0; i < particleCount; i++) {
      positions[i * 3] = (Math.random() - 0.5) * 150;
      positions[i * 3 + 1] = (Math.random() - 0.5) * 50;
      positions[i * 3 + 2] = (Math.random() - 0.5) * 150;
      particleVelocities[i * 3] = (Math.random() - 0.5) * 0.02;
      particleVelocities[i * 3 + 1] = (Math.random() - 0.5) * 0.01;
      particleVelocities[i * 3 + 2] = (Math.random() - 0.5) * 0.02;
    }
    particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    const particleMaterial = new THREE.PointsMaterial({
      color: 0xffffff,
      size: 0.1,
      sizeAttenuation: true,
      transparent: true,
      opacity: 0.7
    });
    const particles = new THREE.Points(particleGeometry, particleMaterial);
    particles.geometry.attributes.position.needsUpdate = true;
    three.particleVelocities = particleVelocities;
    scene.add(particles);
    scene.add(techGroup);
    three.isRunning = true;
    // Mouse interaction
    window.addEventListener('mousemove', throttle((e) => {
      const rect = canvas.getBoundingClientRect();
      three.mouseX = ((e.clientX - rect.left) / rect.width) * 2 - 1;
      three.mouseY = -((e.clientY - rect.top) / rect.height) * 2 + 1;
    }, 50));
    window.addEventListener('touchmove', throttle((e) => {
      if (e.touches.length !== 1) return;
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      three.mouseX = ((touch.clientX - rect.left) / rect.width) * 2 - 1;
      three.mouseY = -((touch.clientY - rect.top) / rect.height) * 2 + 1;
    }, 50), { passive: true });
    // Animation loop
    function animate(currentTime) {
      // Smooth camera movement towards mouse position
      const targetX = three.mouseX * 5;
      const targetY = three.mouseY * 2 + 5;
      camera.position.x = lerp(camera.position.x, targetX, 0.05);
      camera.position.y = lerp(camera.position.y, targetY, 0.05);
      camera.lookAt(0, 0, 0);
      
      // Update particle positions
      const positions = particles.geometry.attributes.position.array;
      const velocities = three.particleVelocities;
      for (let i = 0; i < particleCount; i++) {
        positions[i * 3] += velocities[i * 3];
        positions[i * 3 + 1] += velocities[i * 3 + 1];
        positions[i * 3 + 2] += velocities[i * 3 + 2];
        // Wrap around logic
        if (positions[i * 3] > 75 || positions[i * 3] < -75 ||
            positions[i * 3 + 1] > 25 || positions[i * 3 + 1] < -25 ||
            positions[i * 3 + 2] > 75 || positions[i * 3 + 2] < -75) {
          positions[i * 3] = (Math.random() - 0.5) * 150;
          positions[i * 3 + 1] = (Math.random() - 0.5) * 50;
          positions[i * 3 + 2] = (Math.random() - 0.5) * 150;
        }
        }   
        particles.geometry.attributes.position.needsUpdate = true;
        renderer.render(scene, camera);
        if (three.isRunning) {
          requestAnimationFrame(animate);
        }   
    }
    requestAnimationFrame(animate);
    // Handle resize
    window.addEventListener('resize', debounce(() => {
      if (!canvas) return;
      const width = canvas.clientWidth;
      const height = canvas.clientHeight;
      renderer.setSize(width, height);
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
    }, 200));
    } catch (error) {
    console.error('Error initializing Three.js scene:', error);
    canvas.style.display = 'none';
    const fallback = document.getElementById('three-fallback');
    if (fallback) fallback.style.display = 'block';
    }
}
/* Utility functions */
function escapeHtml(text) {
  const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}
function lerp(a, b, t) {
  return a + (b - a) * t;
}
function throttle(func, limit) {
  let inThrottle;
    return function() {
        const args = arguments; 
        const context = this;
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);  
    }
    };
}
/* Initialize everything after DOM is ready */
document.addEventListener('DOMContentLoaded', () => {
  initLoadingSequence();
  // Modal open/close bindings
  if (dom.hireBtn) {
    dom.hireBtn.addEventListener('click', openHireModal);
  }
  if (dom.hireModalClose) {
    dom.hireModalClose.addEventListener('click', closeHireModal);
  }
  if (dom.hireModal) {
    dom.hireModal.addEventListener('click', (e) => {
      if (e.target === dom.hireModal) {
        closeHireModal();
      }
    });
  }
});
function initLoadingSequence() {
  if (!dom.progressBar || !dom.progressContainer) return;
  
  let progress = 0;
  let targetProgress = 0;
  const startTime = performance.now();
  
  function updateProgress() {
    const elapsed = performance.now() - startTime;
    // Simulate loading progress
    targetProgress = Math.min(90, (elapsed / 3000) * 90); // Cap at 90% until complete
    progress += (targetProgress - progress) * 0.1; // Smooth easing
    dom.progressBar.style.width = `${progress}%`;
    if (progress < 99) {
      requestAnimationFrame(updateProgress);
    } else {
      // Complete to 100%
      dom.progressBar.style.width = '100%';
      setTimeout(() => {
        // Fade out progress bar
        dom.progressBar.style.transition = 'opacity 0.5s ease';
        dom.progressBar.style.opacity = '0';
        setTimeout(() => {
          dom.progressContainer.style.display = 'none';
          // Initialize other features after loading
          renderEnhancedProjects();
          renderEnhancedTechStack();
          bindEnhancedNav();
          bindProjectFilters();
          bindEnhancedSocialTooltips();
          bindEnhancedContactForm();
          bindProfileTilt();
          initScrollAnimations();
          // Typing animation and Three.js scene after slight delay
          setTimeout(() => {
            initTypingAnimation();
            initThreeScene();
          }, 500);  
        }, 500);
      }, 300);
    }
  }
    updateProgress();
}
function bindEnhancedNav() {
    if (!dom.navLinks) return;
    
    // Smooth scroll for nav links
    dom.navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        if (targetElement) {
            const offsetTop = targetElement.offsetTop - 60; // Adjust for fixed header height
            window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
            });
        }
        });
    });
    
    // Mobile menu toggle
    if (dom.mobileMenuBtn && dom.navMenu) {
        dom.mobileMenuBtn.addEventListener('click', () => {
        const isExpanded = dom.mobileMenuBtn.getAttribute('aria-expanded') === 'true';
        dom.mobileMenuBtn.setAttribute('aria-expanded', String(!isExpanded));
        dom.navMenu.classList.toggle('hidden');
        });
        // Close mobile menu on link click
        dom.navLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (window.innerWidth < 768 && !dom.navMenu.classList.contains('hidden')) {
            dom.navMenu.classList.add('hidden');
            dom.mobileMenuBtn.setAttribute('aria-expanded', 'false');
            }
        });
        });
    }
    
    // Close mobile menu on outside click
    document.addEventListener('click', (e) => {
        if (window.innerWidth >= 768) return; // Only for mobile
        if (dom.navMenu.classList.contains('hidden')) return; // Already closed
        if (e.target !== dom.mobileMenuBtn && !dom.mobileMenuBtn.contains(e.target) && !dom.navMenu.contains(e.target)) {
        dom.navMenu.classList.add('hidden');
        dom.mobileMenuBtn.setAttribute('aria-expanded', 'false');
        }
    });     
    // Close mobile menu on Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && window.innerWidth < 768 && !dom.navMenu.classList.contains('hidden')) {
        dom.navMenu.classList.add('hidden');
        dom.mobileMenuBtn.setAttribute('aria-expanded', 'false');
        dom.mobileMenuBtn.focus();
        }
    }); 
    // Change header style on scroll
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
        dom.header.classList.add('bg-slate-900', 'shadow-lg');
        } else {
        dom.header.classList.remove('bg-slate-900', 'shadow-lg');
        }
    });     
    // Initial check.  
    if (window.scrollY > 50) {
        dom.header.classList.add('bg-slate-900', 'shadow-lg');
    } else {
        dom.header.classList.remove('bg-slate-900', 'shadow-lg');
    }
}
function renderEnhancedProjects() {
  if (!dom.projectsGrid) return;
  
  dom.projectsGrid.innerHTML = '';
  
  projectsData.forEach((project, index) => {
    const card = document.createElement('div');
    card.className = 'project-card bg-slate-800 border border-slate-700 rounded-2xl p-6 flex flex-col justify-between shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-out opacity-0 translate-y-10';
    card.style.animationDelay = `${index * 100}ms`;
    card.style.animationFillMode = 'forwards';
    card.style.animationName = 'fadeInUp';
    card.style.animationDuration = '0.6s';
    card.style.animationTimingFunction = 'ease-out';
    card.setAttribute('data-category', project.category);
    const header = document.createElement('div');
    header.className = 'flex items-center gap-4 mb-4';
    const iconContainer = document.createElement('div');
    iconContainer.className = 'w-12 h-12 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg flex-shrink-0';
    const iconWrapper = document.createElement('div');
    iconWrapper.className = 'w-8 h-8';
    const icon = document.createElement('img');
    icon.src = project.icon;
    icon.alt = project.title + ' icon';
    icon.className = 'w-full h-full object-contain filter drop-shadow-sm';
    icon.onerror = function() {
      // Fallback to Lucide icon if image fails
      this.style.display = 'none';
      const fallbackIcon = document.createElement('i');
      fallbackIcon.dataset.lucide = 'folder-open';
      fallbackIcon.className = 'w-6 h-6 text-slate-400';
      iconWrapper.appendChild(fallbackIcon);
      if (typeof lucide !== 'undefined') lucide.createIcons();
    };  
    iconWrapper.appendChild(icon);
    iconContainer.appendChild(iconWrapper); 
    const title = document.createElement('h3');
    title.className = 'text-lg font-bold text-white';
    title.textContent = project.title;
    header.appendChild(iconContainer);
    header.appendChild(title);
    const description = document.createElement('p');
    description.className = 'text-sm text-slate-400 mb-4 flex-1';
    description.textContent = project.description;
    const techContainer = document.createElement('div');

    techContainer.className = 'mb-4';
    project.tech.forEach(tech => {
      const techBadge = document.createElement('span');
      techBadge.className = 'inline-block bg-slate-700 text-slate-300 text-xs font-medium mr-2 mb-2 px-2.5 py-0.5 rounded-full';
      techBadge.textContent = tech;
      techContainer.appendChild(techBadge);
    });
    const footer = document.createElement('div');
    footer.className = 'mt-4 flex items-center justify-between';
    const links = document.createElement('div');
    links.className = 'flex items-center gap-4';
    const demoLink = document.createElement('a');
    demoLink.href = project.demoLink;
    demoLink.target = '_blank';
    demoLink.rel = 'noopener noreferrer';
    demoLink.className = 'text-amber-400 hover:text-amber-300 transition-colors duration-200';
    demoLink.innerHTML = '<i data-lucide="external-link" class="w-4 h-4 inline"></i> Demo';
    const repoLink = document.createElement('a');

    repoLink.href = project.repoLink;
    repoLink.target = '_blank';

    repoLink.rel = 'noopener noreferrer';

    repoLink.className = 'text-amber-400 hover:text-amber-300 transition-colors duration-200';
    repoLink.innerHTML = '<i data-lucide="github" class="w-4 h-4 inline"></i> Code';
    links.appendChild(demoLink);
    links.appendChild(repoLink);
    const category = document.createElement('span');
    category.className = 'text-xs text-slate-500';
    category.textContent = project.category.toUpperCase();
    footer.appendChild(links);
    footer.appendChild(category);
    card.appendChild(header);
    card.appendChild(description);
    card.appendChild(techContainer);
    card.appendChild(footer);
    dom.projectsGrid.appendChild(card);
    });
    if (typeof lucide !== 'undefined') lucide.createIcons();
}
function renderEnhancedTechStack() {
  if (!dom.techGrid) return;
  
  dom.techGrid.innerHTML = '';
  
  techStackData.forEach((tech, index) => {
    const item = document.createElement('div');
    item.className = 'tech-item bg-slate-800 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-out opacity-0 translate-y-10';
    item.style.animationDelay = `${index * 100}ms`;
    item.style.animationFillMode = 'forwards';
    item.style.animationName = 'fadeInUp';
    item.style.animationDuration = '0.6s';
    item.style.animationTimingFunction = 'ease-out';
    const iconContainer = document.createElement('div');
    iconContainer.className = 'w-12 h-12 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg flex-shrink-0';
    const iconWrapper = document.createElement('div');
    iconWrapper.className = 'w-8 h-8';
    const icon = document.createElement('img');
    icon.src = tech.icon;
    icon.alt = tech.name + ' icon';
    icon.className = 'w-full h-full object-contain filter drop-shadow-sm';
    icon.onerror = function() {
      // Fallback to Lucide icon if image fails
      this.style.display = 'none';
      const fallbackIcon = document.createElement('i');
      fallbackIcon.dataset.lucide = 'cpu';
      fallbackIcon.className = 'w-6 h-6 text-slate-400';
      iconWrapper.appendChild(fallbackIcon);
      if (typeof lucide !== 'undefined') lucide.createIcons();
    };
    iconWrapper.appendChild(icon);
    iconContainer.appendChild(iconWrapper);
    const info = document.createElement('div');
    info.className = 'flex-1';
    const name = document.createElement('h4');
    name.className = 'text-md font-semibold text-white';
    name.textContent = tech.name;
    const level = document.createElement('p');
    level.className = 'text-xs text-slate-400';
    level.textContent = tech.level;
    info.appendChild(name);
    info.appendChild(level);
    item.appendChild(iconContainer);
    item.appendChild(info);
    dom.techGrid.appendChild(item);
    });
    if (typeof lucide !== 'undefined') lucide.createIcons();
}
function bindProjectFilters() {
  if (!dom.filterButtons || !dom.projectsGrid) return;
  
  dom.filterButtons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      // Update active button styles
      dom.filterButtons.forEach(b => {
        b.classList.remove('bg-slate-800', 'text-white');
        b.classList.add('bg-slate-700', 'text-slate-400', 'hover:bg-slate-800');
      });

        btn.classList.add('bg-slate-800', 'text-white');
        btn.classList.remove('bg-slate-700', 'text-slate-400', 'hover:bg-slate-800');
        const category = btn.getAttribute('data-category');
        const projects = dom.projectsGrid.querySelectorAll('.project-card');
        projects.forEach(project => {
        const projectCategory = project.getAttribute('data-category');
        if (category === 'all' || projectCategory === category) {
          project.style.display = 'flex';
          setTimeout(() => {
            project.style.opacity = '1';
            project.style.transform = 'translateY(0) scale(1)';
            project.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
          }, 50);
        } else {
          project.style.opacity = '0';
          project.style.transform = 'translateY(10px) scale(0.95)';
          project.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';  
            setTimeout(() => {
                project.style.display = 'none';
            }, 300);
        }
        });
    });
},
function bindEnhancedSocialTooltips() {
    if (!dom.socialLinks) return;
    
    dom.socialLinks.forEach(link => {
        const button = link.querySelector('button');
        const tooltip = link.querySelector('.tooltip');
        if (!button || !tooltip) return;
        let hideTimeout;
        // Position tooltip above the button
        const rect = button.getBoundingClientRect();
        tooltip.style.left = '50%';
        tooltip.style.top = '-40px';
        tooltip.style.transform = 'translateX(-50%) translateY(10px) scale(0.95)';
        // Show/hide handlers
        function showTooltip() {
            clearTimeout(hideTimeout);
            tooltip.classList.remove('hidden');
            setTimeout(() => {
                tooltip.style.opacity = '1';
                tooltip.style.transform = 'translateX(-50%) translateY(0) scale(1)';
                tooltip.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
            }, 10);
        }       
        function hideTooltip() {
            tooltip.style.opacity = '0';
            tooltip.style.transform = 'translateX(-50%) translateY(10px) scale(0.95)';
            tooltip.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
            hideTimeout = setTimeout(() => {
                tooltip.classList.add('hidden');
            }, 300);
        }   
        button.addEventListener('mouseenter', showTooltip);
        button.addEventListener('focus', showTooltip);
        button.addEventListener('mouseleave', hideTooltip);
        button.addEventListener('blur', hideTooltip);
        // Touch support
        button.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (tooltip.classList.contains('hidden')) {
                showTooltip();
                document.addEventListener('touchstart', outsideClickListener);
            } else {
                hideTooltip();
                document.removeEventListener('touchstart', outsideClickListener);
            }
        }, { passive: false });
        function outsideClickListener(e) {
            if (!link.contains(e.target)) {
                hideTooltip();
                document.removeEventListener('touchstart', outsideClickListener);
            }
        }
    });
},
function bindEnhancedContactForm() {    
    if (!dom.contactForm) return;
    
    const inputs = [
      dom.contactForm.name,
      dom.contactForm.email,
      dom.contactForm.subject,
      dom.contactForm.message
    ];
    function validateField({ target }) {
      let isValid = true;
      let errorMessage = '';
      const value = target.value.trim();
      if (target.name === 'name') {
        if (value.length < 2) {
          isValid = false;
          errorMessage = 'Name must be at least 2 characters.';
        }
      } else if (target.name === 'email') {
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(value)) {
          isValid = false;
          errorMessage = 'Please enter a valid email address.';
        }
      } else if (target.name === 'subject') {
        if (value.length < 4) {
          isValid = false;
          errorMessage = 'Subject must be at least 4 characters.';
        }
      } else if (target.name === 'message') {
        if (value.length < 10) {
          isValid = false;
          errorMessage = 'Message must be at least 10 characters.';
        }
      }
      const errorElem = target.nextElementSibling;
      if (isValid) {
        target.classList.remove('border-red-500');
        target.classList.add('border-green-500');
        if (errorElem) errorElem.textContent = '';
      } else {
        target.classList.remove('border-green-500');
        target.classList.add('border-red-500');
        if (errorElem) errorElem.textContent = errorMessage;
      }
      return isValid;
    }
    inputs.forEach(input => {
      input.addEventListener('input', validateField);
      input.addEventListener('blur', validateField);
    });
    dom.contactForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const submitButton = dom.contactForm.querySelector('button[type="submit"]');
      let formIsValid = true;
      inputs.forEach(input => {
        if (!validateField({ target: input })) {
          formIsValid = false;
        }   
        });
        if (!formIsValid) {
        return;
        }
        // Disable submit button to prevent multiple submissions
        submitButton.disabled = true;
        submitButton.textContent = 'Sending...';
        // Simulate form submission (replace with actual submission logic)
        try {
          await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate network delay
          // On success
          dom.contactForm.reset();
          inputs.forEach(input => {
            input.classList.remove('border-green-500');
          });
          alert('Your message has been sent successfully!');
        } catch (error) {
          alert('There was an error sending your message. Please try again later.');
        } finally {
          submitButton.disabled = false;
          submitButton.textContent = 'Send Message';
        }
    });
},
let lastFocusedElement = null;
function openHireModal() {
    if (!dom.hireModal) return;
    
    lastFocusedElement = document.activeElement;
    dom.hireModal.classList.remove('hidden');
    setTimeout(() => {
        dom.hireModal.classList.add('opacity-100');
        dom.hireModal.classList.remove('opacity-0');
        dom.hireModal.setAttribute('aria-hidden', 'false');
        // Focus the first focusable element in the modal
        const focusableElements = dom.hireModal.querySelectorAll(
            'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        if (focusableElements.length) {
            focusableElements[0].focus();
        }
        trapFocus(dom.hireModal);
    }, 50);
}
function closeHireModal() {
    if (!dom.hireModal) return;
    
    dom.hireModal.classList.remove('opacity-100');
    dom.hireModal.classList.add('opacity-0');
    dom.hireModal.setAttribute('aria-hidden', 'true');
    setTimeout(() => {
        dom.hireModal.classList.add('hidden');
        // Return focus to the last focused element before modal opened
        if (lastFocusedElement) {
            lastFocusedElement.focus();
        }
    }, 300);
}
function trapFocus(element) {
    const focusableElements = element.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    );
    const firstElement = focusableElements[0];
    const lastElement = focusableElements[focusableElements.length - 1];
    function handleFocus(e) {
        if (e.key === 'Tab' || e.keyCode === 9) {
            if (e.shiftKey) { // Shift + Tab
                if (document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                }
            } else { // Tab
                if (document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            }
        } else if (e.key === 'Escape' || e.keyCode === 27) {
            closeHireModal();
        }
    }
    element.addEventListener('keydown', handleFocus);
}
function bindProfileTilt() {
  if (!dom.profileFrame) return;
  
  const frame = dom.profileFrame;
  frame.style.transition = 'transform 0.2s ease-out';
  frame.addEventListener('mousemove', throttle((e) => {
    const rect = frame.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;
    const rotateX = (mouseY / rect.height) * -10;
    const rotateY = (mouseX / rect.width) * 10;
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(10px)
    `;
    }, 50));
    frame.addEventListener('mouseleave', () => {
    frame.style.transform = '';
    });
    // Touch support
    frame.addEventListener('touchmove', throttle((e) => {
    if (e.touches.length !== 1) return;
    const touch = e.touches[0];
    const rect = frame.getBoundingClientRect();
    const mouseX = touch.clientX - rect.left;
    const mouseY = touch.clientY - rect.top;
    const rotateX = (mouseY / rect.height) * -10;
    const rotateY = (mouseX / rect.width) * 10;
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(10px)
    `;
    }, 50), { passive: true });
    frame.addEventListener('touchend', () => {
    frame.style.transform = '';
    });
}
function initScrollAnimations() {
  if (!dom.scrollSections) return;
  
    const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
        entry.target.classList.add('animate-fadeInUp');
        entry.target.classList.remove('opacity-0', 'translate-y-10');
        observer.unobserve(entry.target); // Animate only once
        }
    });
    }, { threshold: 0.1 });
    
    dom.scrollSections.forEach(section => {
    section.classList.add('opacity-0', 'translate-y-10');
    });
    
    document.querySelectorAll('.scroll-animate').forEach(el => {
    observer.observe(el);
    }); 
}
function initTypingAnimation() {
    if (!dom.typingText) return;
    
    const phrases = [
        "Full-Stack Developer",
        "JavaScript Enthusiast",
        "Open Source Contributor",
        "Tech Blogger",
        "Lifelong Learner"
    ];
    
    const typingElement = dom.typingText;
    let currentPhraseIndex = 0;
    let currentCharIndex = 0;
    let isDeleting = false;
    const typingSpeed = 100; // ms per character
    const deletingSpeed = 50; // ms per character
    const pauseDuration = 2000; // ms to pause at end of phrase
    
    function type() {
        const currentPhrase = phrases[currentPhraseIndex];
        
        if (isDeleting) {
        currentCharIndex--;
        typingElement.textContent = currentPhrase.substring(0, currentCharIndex);       
        if (currentCharIndex <= 0) {
            isDeleting = false;
            currentPhraseIndex = (currentPhraseIndex + 1) % phrases.length;
            setTimeout(type, 500); // Short pause before typing next phrase
        } else {
            setTimeout(type, deletingSpeed);
        }
        } else {
        currentCharIndex++;
        typingElement.textContent = currentPhrase.substring(0, currentCharIndex);
        if (currentCharIndex >= currentPhrase.length) {
            isDeleting = true;
            setTimeout(type, pauseDuration); // Pause at end of phrase
        } else {
            setTimeout(type, typingSpeed);
        }
        }
    }
    type();
}
function initThreeScene() {
    if (!dom.threeCanvas) return;
    
    const canvas = dom.threeCanvas;
    try {
        const three = {
        scene: null,
        camera: null,
        renderer: null,
        mouseX: 0,
        mouseY: 0,
        particleVelocities: null,
        isRunning: false
        };
        const scene = new THREE.Scene();
        three.scene = scene;
        const camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
        three.camera = camera;
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        three.renderer = renderer;
        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        // Camera position      
        camera.position.set(0, 5, 15);
        camera.lookAt(0, 0, 0); 
        // Lights
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);
        scene.add(ambientLight);    
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 10, 7.5);
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 1024;
        directionalLight.shadow.mapSize.height = 1024;
        directionalLight.shadow.camera.near = 0.5;
        directionalLight.shadow.camera.far = 50;
        directionalLight.shadow.camera.left = -10;
        directionalLight.shadow.camera.right = 10;
        directionalLight.shadow.camera.top = 10;
        directionalLight.shadow.camera.bottom = -10;
        scene.add(directionalLight);
        // Group for tech elements
        const techGroup = new THREE.Group();
        // Cubes representing CPUs
        const cpuMaterial = new THREE.MeshPhongMaterial({

        color: 0x00aaff,
        emissive: 0x004466, 
        emissiveIntensity: 0.5,
        shininess: 80
        });
        for (let i = 0; i < 10; i++) {
        const size = 0.5 + Math.random() * 1.5; 
        const cpu = new THREE.Mesh(
            new THREE.BoxGeometry(size, size * 0.2, size),
            cpuMaterial
        );
        cpu.position.set(
            (Math.random() - 0.5) * 10,
            (Math.random() - 0.5) * 2,
            (Math.random() - 0.5) * 8
        );
        cpu.rotation.set(
            Math.random() * Math.PI,
            Math.random() * Math.PI,
            0
        );
        cpu.castShadow = true;
        cpu.receiveShadow = true;
        techGroup.add(cpu);
        }
        // Spheres representing databases
        const dbMaterial = new THREE.MeshPhongMaterial({
        color: 0xffaa00,
        emissive: 0x664400,
        emissiveIntensity: 0.5,
        shininess: 80
        });
        for (let i = 0; i < 10; i++) {
        const radius = 0.4 + Math.random() * 1.2;
        const db = new THREE.Mesh(
            new THREE.SphereGeometry(radius, 32, 32),
            dbMaterial
        );
            
        db.position.set(
            (Math.random() - 0.5) * 10,
            (Math.random() - 0.5) * 2,
            (Math.random() - 0.5) * 8
        );
        db.castShadow = true;
        db.receiveShadow = true;
        techGroup.add(db);
        }
        // Particles
        const particleCount = 500;
        const particleGeometry = new THREE.BufferGeometry();
        const positions = new Float32Array(particleCount * 3);
        const particleVelocities = new Float32Array(particleCount * 3);
        for (let i = 0; i < particleCount; i++) {
        positions[i * 3] = (Math.random() - 0.5) * 150;
        positions[i * 3 + 1] = (Math.random() - 0.5) * 50;
        positions[i * 3 + 2] = (Math.random() - 0.5) * 150;
        particleVelocities[i * 3] = (Math.random() - 0.5) * 0.02;
        particleVelocities[i * 3 + 1] = (Math.random() - 0.5) * 0.02;
        particleVelocities[i * 3 + 2] = (Math.random() - 0.5) * 0.02;
        }   
        particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const particleMaterial = new THREE.PointsMaterial({
        color: 0xffffff,
        size: 0.1,
        sizeAttenuation: true,
        transparent: true,
        opacity: 0.7
        });
        const particles = new THREE.Points(particleGeometry, particleMaterial);
        scene.add(particles);
        three.particleVelocities = particleVelocities;
        scene.add(techGroup);
        // Ground plane
        const groundGeometry = new THREE.PlaneGeometry(200, 200);
        const groundMaterial = new THREE.ShadowMaterial({ opacity: 0.2 });
        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2;
        ground.position.y = -5;
        ground.receiveShadow = true;
        scene.add(ground);
        // Start animation
        three.isRunning = true;
        // Mouse move handler
        window.addEventListener('mousemove', throttle((e) => {
        const rect = canvas.getBoundingClientRect();
        three.mouseX = ((e.clientX - rect.left) / rect.width) * 2 - 1;
        three.mouseY = -((e.clientY - rect.top) / rect.height) * 2 + 1;
        }, 50));
        // Touch support
        window.addEventListener('touchmove', throttle((e) => {
        if (e.touches.length !== 1) return;
        const touch = e.touches[0];
        const rect = canvas.getBoundingClientRect();
        three.mouseX = ((touch.clientX - rect.left) / rect.width) * 2 - 1;
        three.mouseY = -((touch.clientY - rect.top) / rect.height) * 2 + 1;
        }, 50), { passive: true });
        function animate() {
        // Smooth camera movement towards mouse
        camera.position.x += (three.mouseX * 5 - camera.position.x) * 0.05;
        


        //please end this asap
</script>



