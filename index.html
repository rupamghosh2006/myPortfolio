<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rupam — Developer & Debugger</title>
  <meta name="description" content="Rupam's single-page portfolio — part-time developer, full-time debugger" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Three.js -->
  <script src="https://unpkg.com/three@0.150.0/build/three.min.js"></script>

  <!-- Lucide Icons (UMD) -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <style>
    /* Enhanced custom styles */
    .loader-overlay {
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(0,0,0,0.97), rgba(0,0,0,0.92));
      z-index: 60;
    }
    .progress-fill { 
      width: 0%; 
      transition: width 3s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(90deg, #f59e0b, #d97706, #f59e0b);
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }
    @keyframes shimmer {
      0%, 100% { background-position: 200% 0; }
      50% { background-position: -200% 0; }
    }
    
    .three-fallback { 
      display:flex; 
      gap:0.5rem; 
      align-items:center; 
      justify-content:center; 
      color: #e6e6e6; 
      background: radial-gradient(circle at center, rgba(245,158,11,0.1), transparent 70%);
    }
    
    /* Enhanced modal animation */
    .modal-open { overflow: hidden; }
    .sr-only { position: absolute; width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0; }
    
    /* Enhanced focus ring with glow */
    .focus-ring:focus { 
      outline: 3px solid rgba(245,158,11,0.4); 
      outline-offset: 2px; 
      border-radius: .5rem;
      box-shadow: 0 0 20px rgba(245,158,11,0.3);
    }
    
    /* Enhanced tilt with more realistic physics */
    .tilt { 
      transition: transform 320ms cubic-bezier(.2,.8,.2,1); 
      transform-style: preserve-3d;
      will-change: transform;
    }
    .tilt:hover {
      transform: translateZ(20px);
    }
    
    /* Smooth entrance animations */
    .animate-in { 
      transform: translateY(0) scale(1); 
      opacity: 1; 
      transition: all 800ms cubic-bezier(.2,.9,.2,1); 
    }
    section { 
      transform: translateY(24px) scale(0.98); 
      opacity: 0; 
    }
    
    /* Enhanced navbar blur */
    .navbar-blur {
      backdrop-filter: blur(12px) saturate(180%);
      background: rgba(0, 0, 0, 0.8);
      border-bottom: 1px solid rgba(148, 163, 184, 0.1);
    }
    
    /* Card hover effects */
    .project-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(148, 163, 184, 0.1);
    }
    .project-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(245, 158, 11, 0.3);
    }
    
    /* Tech stack glow effect */
    .tech-item {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .tech-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(245,158,11,0.1), transparent);
      transition: left 0.5s ease;
    }
    .tech-item:hover::before {
      left: 100%;
    }
    .tech-item:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 10px 25px rgba(245,158,11,0.15);
    }
    
    /* Typing animation for hero text */
    .typing-animation {
      overflow: hidden;
      border-right: 2px solid #f59e0b;
      white-space: nowrap;
      animation: typing 3s steps(40, end), blink 0.75s step-end infinite;
    }
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    @keyframes blink {
      from, to { border-color: transparent; }
      50% { border-color: #f59e0b; }
    }
    
    /* Enhanced gradient backgrounds */
    .hero-gradient {
      background: radial-gradient(ellipse at center, rgba(245,158,11,0.1) 0%, transparent 70%);
    }
    
    /* Smooth scroll behavior */
    html {
      scroll-behavior: smooth;
    }
    
    /* Loading pulse effect */
    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Enhanced form styles */
    .form-input {
      transition: all 0.3s ease;
      border: 1px solid rgba(148, 163, 184, 0.2);
    }
    .form-input:focus {
      border-color: #f59e0b;
      box-shadow: 0 0 0 3px rgba(245,158,11,0.1);
    }
    
    /* Status indicator */
    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 8px;
    }
    .status-active { background: #10b981; box-shadow: 0 0 6px #10b981; }
    .status-past { background: #6b7280; }
    
    /* Enhanced mobile menu */
    .mobile-menu {
      backdrop-filter: blur(20px);
      background: rgba(0, 0, 0, 0.95);
    }
    
    /* Fade animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeOut {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(-30px);
      }
    }
  </style>
</head>
<body class="bg-black text-slate-100 antialiased selection:bg-yellow-400 selection:text-black overflow-x-hidden">

<!-- Enhanced Loader -->
<div id="loader" class="loader-overlay fixed inset-0 flex flex-col items-center justify-center text-center p-6">
  <div class="max-w-lg w-full">
    <div class="mb-8 flex items-center justify-center">
      <div class="relative">
        <i data-lucide="cpu" class="w-12 h-12 text-yellow-400 pulse"></i>
        <!-- <div class="absolute inset-0 w-12 h-12 rounded-full border-2 border-yellow-400 border-t-transparent animate-spin"></div> -->
      </div>
    </div>
    <p class="text-xl font-bold text-white mb-2">I'm not a professional UI/UX designer — don't expect much.</p>
    <div class="mt-8">
      <div class="w-full h-3 bg-slate-800 rounded-full overflow-hidden shadow-inner">
        <div class="progress-fill h-3 rounded-full"></div>
      </div>
      <div id="loader-percent" class="text-lg font-mono text-slate-300 mt-4">0%</div>
    </div>
    <p class="text-sm text-slate-400 mt-6 animate-pulse">Initializing debugging protocols...</p>
  </div>
</div>

<!-- Main content -->
<main id="main-content" class="min-h-screen opacity-0 transition-opacity duration-700">

  <!-- Enhanced Navbar -->
  <header class="sticky top-0 z-50 navbar-blur">
    <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center gap-3">
          <button id="brand" class="inline-flex items-center gap-2 focus-ring group" aria-label="Rupam brand">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-yellow-400 via-amber-500 to-orange-500 flex items-center justify-center text-black font-bold shadow-lg group-hover:scale-110 transition-transform">RG</div>
            <span class="hidden sm:inline text-sm font-medium bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent">Rupam Ghosh</span>
          </button>
        </div>

        <div class="hidden md:flex items-center gap-8">
          <a href="#hero" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Home</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#projects" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Projects</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#about" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>About</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#tech-stack" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Tech</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <a href="#contact" class="nav-link text-slate-300 hover:text-white focus-ring relative group">
            <span>Contact</span>
            <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 group-hover:w-full transition-all duration-300"></div>
          </a>
          <button id="hire-btn-nav" class="ml-2 px-6 py-2.5 rounded-lg bg-gradient-to-r from-amber-400 to-yellow-500 text-black font-semibold hover:scale-105 hover:shadow-lg focus-ring transition-all duration-200">Hire me</button>
        </div>

        <!-- Mobile menu button -->
        <div class="md:hidden">
          <button id="mobile-toggle" aria-label="Open menu" class="p-2 rounded-md focus-ring hover:bg-slate-800 transition-colors">
            <i data-lucide="menu" class="w-6 h-6 text-slate-200"></i>
          </button>
        </div>
      </div>
      
      <!-- Mobile nav -->
      <div id="mobile-nav" class="md:hidden hidden pb-4 mobile-menu rounded-b-lg">
        <div class="flex flex-col gap-1 mt-2">
          <a href="#hero" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="home" class="w-4 h-4 inline mr-2"></i>Home
          </a>
          <a href="#projects" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="folder" class="w-4 h-4 inline mr-2"></i>Projects
          </a>
          <a href="#about" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>About
          </a>
          <a href="#tech-stack" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="code" class="w-4 h-4 inline mr-2"></i>Tech
          </a>
          <a href="#contact" class="block px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-all">
            <i data-lucide="mail" class="w-4 h-4 inline mr-2"></i>Contact
          </a>
          <button id="mobile-hire" class="mt-3 mx-2 px-4 py-3 rounded-lg bg-gradient-to-r from-amber-400 to-yellow-500 text-black font-semibold hover:scale-105 transition-transform">Hire me</button>
        </div>
      </div>
    </nav>
  </header>

  <!-- Enhanced Hero section -->
  <section id="hero" class="relative min-h-screen flex items-center hero-gradient">
    <!-- 3D canvas -->
    <!-- <div class="absolute inset-0 -z-10">
      <canvas id="three-canvas" class="w-full h-full block"></canvas>
      <div id="three-fallback" class="hidden h-full w-full bg-gradient-to-b from-black/90 to-black/95 flex items-center justify-center three-fallback">
        <div class="text-center">
          <i data-lucide="cpu" class="w-16 h-16 text-slate-300 mx-auto mb-4"></i>
          <span class="text-slate-300 text-lg">3D visualization disabled</span>
          <p class="text-slate-500 text-sm mt-2">Static tech environment active</p>
        </div>
      </div>
    </div> -->

    <div class="max-w-6xl mx-auto w-full px-6 sm:px-8 flex flex-col lg:flex-row items-center gap-12">
      <div class="lg:w-3/5 text-left space-y-8">
        <div class="space-y-4">
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight text-white">
            <span class="block typing-animation">Hey — welcome to</span>
            <span class="block bg-gradient-to-r from-yellow-400 via-amber-500 to-orange-500 bg-clip-text text-transparent">Rupam's portfolio.</span>
          </h1>
          <p class="text-xl sm:text-2xl text-slate-300 font-light">
            Part-time developer, <span class="text-yellow-400 font-semibold">full-time debugger.</span>
          </p>
        </div>

        <!-- Stats row -->
        <div class="flex flex-wrap gap-6 text-center sm:text-left">
          <div class="flex items-center gap-2">
            <div class="status-indicator status-active"></div>
            <span class="text-sm text-slate-400">Available for hire</span>
          </div>
          <div class="flex items-center gap-2">
            <i data-lucide="coffee" class="w-4 h-4 text-amber-400"></i>
            <span class="text-sm text-slate-400">Coffee-driven development</span>
          </div>
          <div class="flex items-center gap-2">
            <i data-lucide="map-pin" class="w-4 h-4 text-amber-400"></i>
            <span class="text-sm text-slate-400">Barasat, West Bengal</span>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 mt-8">
          <button id="hero-hire" class="px-8 py-4 rounded-xl bg-gradient-to-r from-amber-400 to-yellow-500 text-black font-semibold hover:scale-105 hover:shadow-xl focus-ring transition-all duration-200 text-lg">
            <i data-lucide="briefcase" class="w-5 h-5 inline mr-2"></i>
            Hire me
          </button>
          <a href="#projects" class="px-8 py-4 rounded-xl border-2 border-slate-600 text-slate-200 hover:bg-slate-800 hover:border-amber-400 focus-ring flex items-center justify-center gap-3 font-semibold transition-all duration-200 text-lg">
            <i data-lucide="folder" class="w-5 h-5"></i>
            View projects
          </a>
        </div>
      </div>
      </div>
    </div>
  </section>

  <!-- Enhanced Projects section -->
  <section id="projects" class="py-20 bg-gradient-to-b from-black to-slate-900">
    <div class="max-w-6xl mx-auto px-6 sm:px-8">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-12 gap-6">
        <div>
          <h2 class="text-3xl sm:text-4xl font-bold mb-3">
            Projects 
            <span class="text-amber-400 text-lg font-normal">The Good, The Bad, The Debugged</span>
          </h2>
          <p class="text-slate-400 text-lg">Past projects and current work in progress</p>
        </div>

        <div class="flex gap-2 flex-wrap">
          <button data-filter="all" class="filter-btn px-4 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-sm text-slate-200 focus-ring transition-colors">
            All Projects
          </button>
          <button data-filter="past" class="filter-btn px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm text-slate-200 focus-ring transition-colors">
            Past Work
          </button>
          <button data-filter="current" class="filter-btn px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm text-slate-200 focus-ring transition-colors">
            Current
          </button>
        </div>
      </div>

      <div id="projects-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-8"></div>
    </div>
  </section>

  <!-- Enhanced About section -->
  <section id="about" class="py-20 bg-gradient-to-r from-black via-slate-900 to-black">
    <div class="max-w-6xl mx-auto px-6 sm:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      <div class="space-y-6">
        <div>
          <h2 class="text-3xl sm:text-4xl font-bold mb-4">
            About <span class="text-amber-400">Me</span>
          </h2>
          <div class="w-20 h-1 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-full mb-6"></div>
        </div>
        
        <div class="space-y-4 text-lg leading-relaxed">
          <p class="text-slate-300">
            Hi, I'm Rupam. I turn coffee into code and error messages into life lessons. I specialize in building practical web systems, debugging things that should have been obvious, and occasionally shipping clean code.
          </p>
          <p class="text-slate-400">
            <span class="text-amber-400 font-semibold">Superpower:</span> Reading stack traces other devs refused to touch.
          </p>
        </div>

        <!-- Skills indicators -->
        <div class="grid grid-cols-2 gap-4 mt-8">
          <div class="text-center p-4 bg-slate-800/50 rounded-lg border border-slate-700">
            <div class="text-2xl font-bold text-amber-400">3+</div>
            <div class="text-sm text-slate-400">Years Experience</div>
          </div>
          <div class="text-center p-4 bg-slate-800/50 rounded-lg border border-slate-700">
            <div class="text-2xl font-bold text-amber-400">10+</div>
            <div class="text-sm text-slate-400">Projects Shipped</div>
          </div>
        </div>
      </div>

      <div class="flex justify-center lg:justify-end">
        <div id="photo-frame" class="tilt w-80 max-w-full rounded-2xl overflow-hidden border-2 border-slate-700 bg-gradient-to-br from-slate-800/60 to-black p-2 shadow-2xl hover:border-amber-400/50 transition-all duration-300">
          <img id="profile-photo" src="myPic.jpg" alt="Rupam in black blazer" width="744" height="1024"
               class="w-full h-auto object-cover block bg-slate-900 rounded-xl">
        </div>
      </div>
    </div>
  </section>

  <!-- Enhanced Tech Stack -->
  <section id="tech-stack" class="py-20 bg-black">
    <div class="max-w-6xl mx-auto px-6 sm:px-8">
      <div class="flex items-center gap-4 mb-12">
        <div class="flex items-center justify-center w-12 h-12 rounded-2xl bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg">
          <i data-lucide="code" class="w-6 h-6"></i>
        </div>
        <div>
          <h2 class="text-3xl font-bold">Technology Stack</h2>
          <p class="text-slate-400">Tools and technologies I work with</p>
        </div>
      </div>

      <div id="tech-grid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-6"></div>
    </div>
  </section>

  <!-- Enhanced Contact section -->
  <section id="contact" class="py-20 bg-gradient-to-b from-slate-900 to-black">
    <div class="max-w-4xl mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-3xl sm:text-4xl font-bold mb-4">Get In Touch</h2>
        <p class="text-xl text-slate-400">Ready to start your next project? Let's talk.</p>
        <div class="w-20 h-1 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-full mx-auto mt-6"></div>
      </div>

      <form id="contact-form" class="bg-slate-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-slate-700 space-y-6" autocomplete="on">
        <input class="sr-only" type="text" name="honey" tabindex="-1" aria-hidden="true">

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <label class="block">
            <span class="text-sm font-semibold text-slate-300 mb-2 block">Name *</span>
            <input id="name" name="Name" required 
                   class="form-input mt-1 block w-full px-4 py-3 rounded-lg bg-slate-700 text-white focus-ring placeholder-slate-400" 
                   placeholder="Your full name" />
          </label>

          <label class="block">
            <span class="text-sm font-semibold text-slate-300 mb-2 block">Email *</span>
            <input id="email" type="email" name="email" required 
                   class="form-input mt-1 block w-full px-4 py-3 rounded-lg bg-slate-700 text-white focus-ring placeholder-slate-400"
                   placeholder="your.email@example.com" />
          </label>
        </div>

        <label class="block">
          <span class="text-sm font-semibold text-slate-300 mb-2 block">Message *</span>
          <textarea id="message" name="Message" rows="6" required 
                    class="form-input mt-1 block w-full px-4 py-3 rounded-lg bg-slate-700 text-white focus-ring placeholder-slate-400 resize-none"
                    placeholder="Tell me about your project..."></textarea>
        </label>

        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
          <button type="submit" id="submit-btn" 
                  class="px-8 py-3 bg-gradient-to-r from-amber-400 to-yellow-500 text-black rounded-lg font-semibold hover:scale-105 focus-ring transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
            <i data-lucide="send" class="w-4 h-4 inline mr-2"></i>
            Send Message
          </button>
          <div id="form-status" class="text-sm text-slate-300"></div>
        </div>

        <!-- Direct Contact Info -->
                    <div class="mt-8 pt-8 border-t border-gray-700 text-center">
                        <p class="text-gray-400 mb-4">Or reach me directly:</p>
                        <div class="flex justify-center space-x-8">
                            <a href="mailto:rupam@example.com" class="flex items-center text-yellow-500 hover:underline focus-ring">
                                <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                                rupamgh32@gmail.com
                            </a>
                            <a href="tel:+918670108063" class="flex items-center text-yellow-500 hover:underline focus-ring">
                                <i data-lucide="phone" class="w-4 h-4 mr-2"></i>
                                +91 86701-08063
                            </a>
                        </div>
      </form>
    </div>
  </section>

  <!-- Enhanced Social/Footer -->
  <footer class="py-12 bg-black border-t border-slate-800">
    <div class="max-w-6xl mx-auto px-6 sm:px-8 flex flex-col md:flex-row items-center justify-between gap-8">
      <div class="flex items-center gap-6">
        <a href="https://github.com//rupamghosh2006" target="_blank" rel="noopener noreferrer" 
           class="text-slate-400 hover:text-white hover:scale-110 transition-all duration-200 p-2">
          <i data-lucide="github" class="w-6 h-6"></i><span class="sr-only">GitHub</span>
        </a>
        <a href="https://www.linkedin.com/in/rupam-ghosh-162593273" target="_blank" rel="noopener noreferrer" 
           class="text-slate-400 hover:text-white hover:scale-110 transition-all duration-200 p-2">
          <i data-lucide="linkedin" class="w-6 h-6"></i><span class="sr-only">LinkedIn</span>
        </a>
        <a href="https://x.com/RupamGhosh2006" target="_blank" rel="noopener noreferrer" 
           class="text-slate-400 hover:text-white hover:scale-110 transition-all duration-200 p-2">
          <i data-lucide="twitter" class="w-6 h-6"></i><span class="sr-only">X</span>
        </a>

        <!-- Enhanced tooltips -->
        <div class="relative group">
          <button id="insta-btn" class="text-slate-400 hover:text-white hover:scale-110 focus-ring p-2 transition-all duration-200" aria-describedby="insta-tip">
            <i data-lucide="instagram" class="w-6 h-6"></i>
            <span class="sr-only">Instagram</span>
          </button>
          <div id="insta-tip" role="tooltip" class="invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-700 backdrop-blur-sm px-3 py-2 rounded-lg text-xs text-slate-200 shadow-lg whitespace-nowrap border border-slate-600">
            Sorry — I don't have time for Instagram.
            <div class="absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-700"></div>
          </div>
        </div>

        <div class="relative group">
          <button id="fb-btn" class="text-slate-400 hover:text-white hover:scale-110 focus-ring p-2 transition-all duration-200" aria-describedby="fb-tip">
            <i data-lucide="facebook" class="w-6 h-6"></i>
            <span class="sr-only">Facebook</span>
          </button>
          <div id="fb-tip" role="tooltip" class="invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-700 backdrop-blur-sm px-3 py-2 rounded-lg text-xs text-slate-200 shadow-lg whitespace-nowrap border border-slate-600">
            Sorry — I don't have time for Facebook.
            <div class="absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-700"></div>
          </div>
        </div>
      </div>

      <div class="text-center md:text-right">
        <div class="text-slate-500 text-sm mb-2">© 2025 Rupam Ghosh</div>
        <div class="text-slate-600 text-xs">No bugs were harmed in production.</div>
      </div>
    </div>
  </footer>

  <!-- Enhanced Hire Modal -->
  <div id="hire-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm">
    <div class="bg-slate-800 rounded-2xl p-8 max-w-md w-full mx-4 transform transition-all scale-95 opacity-0 border border-slate-700 shadow-2xl" id="hire-modal-inner" role="dialog" aria-modal="true" aria-labelledby="hire-title">
      <div class="text-center">
        <div class="w-16 h-16 mx-auto bg-gradient-to-r from-amber-400 to-yellow-500 rounded-2xl flex items-center justify-center mb-6">
          <i data-lucide="briefcase" class="w-8 h-8 text-black"></i>
        </div>
        <h3 id="hire-title" class="text-2xl font-bold mb-4 text-white">Hold up!</h3>
        <p class="text-slate-300 mb-2 text-lg">Currently working as a freelancer</p>
        <p class="text-slate-400 mb-8 text-sm">I may get expensive for you, but the quality is worth it.</p>

        <div class="flex flex-col sm:flex-row gap-4">
          <button id="contact-anyway-btn" class="flex-1 bg-gradient-to-r from-amber-400 to-yellow-500 text-black py-3 px-6 rounded-lg font-semibold hover:scale-105 focus-ring transition-all duration-200">
            <i data-lucide="mail" class="w-4 h-4 inline mr-2"></i>
            Contact anyway
          </button>
          <button id="close-modal-btn" class="flex-1 border-2 border-slate-600 text-slate-200 py-3 px-6 rounded-lg font-semibold hover:bg-slate-700 hover:border-slate-500 focus-ring transition-all duration-200">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

</main>

<!-- Enhanced JavaScript -->
<script>
/* Enhanced Data with better project descriptions and technologies */
const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/AKfycby_3cUZeM7RapicKpdny35Gf8WmktfWVmupNwQ0M1FR0A2yDH_D7nVn7Evz0O4X4CzElg/exec';

const projectsData = [
  { 
    id: 1, 
    title: "E-Commerce Platform", 
    description: "Full-featured shopping platform with real payment processing, inventory management, and admin dashboard. Built for scalability with modern architecture patterns.", 
    category: "past", 
    role: "Full Stack Developer", 
    duration: "6 months", 
    technologies: ["React", "Node.js", "MongoDB", "Stripe", "AWS"], 
    icon: "shopping-cart", 
    gradient: "from-blue-600 to-purple-600",
    github: "https://github.com/",
    demo: "https://demo.example.com"
  },
  { 
    id: 2, 
    title: "Task Management App", 
    description: "Mobile-first task management solution with team collaboration, real-time updates, and dark mode. Because the world needed another todo app (but this one actually works).", 
    category: "past", 
    role: "Mobile Developer", 
    duration: "3 months", 
    technologies: ["React Native", "Firebase", "Redux", "Push Notifications"], 
    icon: "smartphone", 
    gradient: "from-green-600 to-teal-600",
    github: "https://github.com/",
    demo: "https://demo.example.com"
  },
  { 
    id: 3, 
    title: "AI Code Reviewer", 
    description: "Intelligent code review system that analyzes code quality, suggests improvements, and catches bugs before they reach production. AI that judges my code better than my past self does.", 
    category: "current", 
    role: "Solo Developer", 
    duration: "Ongoing", 
    technologies: ["Python", "OpenAI", "FastAPI", "Docker", "PostgreSQL"], 
    icon: "zap", 
    gradient: "from-yellow-600 to-orange-600", 
    active: true,
    github: "https://github.com/",
    demo: "https://preview.example.com"
  },
  {
    id: 4,
    title: "Real-time Chat Platform",
    description: "Secure messaging platform with end-to-end encryption, file sharing, and video calling. Built for privacy-conscious users who value security.",
    category: "past",
    role: "Backend Developer",
    duration: "4 months",
    technologies: ["Socket.io", "Express", "Redis", "WebRTC", "JWT"],
    icon: "message-circle",
    gradient: "from-indigo-600 to-purple-600",
    github: "https://github.com/",
    demo: "https://chat.example.com"
  }
];

const techStackData = [
  { 
    name: "JavaScript", 
    level: "Intermediate", 
    color: "yellow-500", 
    logo: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100"><path fill="#F7DF1E" d="M100 0H0v100h100z"/><path fill="#000" d="M67.175 78.125c2.014 3.29 4.634 5.707 9.27 5.707 3.893 0 6.38-1.946 6.38-4.635 0-3.222-2.555-4.364-6.84-6.238l-2.35-1.008c-6.781-2.89-11.286-6.508-11.286-14.159 0-7.047 5.37-12.413 13.762-12.413 5.975 0 10.27 2.08 13.365 7.524l-7.317 4.699c-1.612-2.89-3.35-4.027-6.048-4.027-2.752 0-4.497 1.746-4.497 4.027 0 2.819 1.746 3.96 5.778 5.706l2.35 1.006c7.983 3.424 12.491 6.915 12.491 14.762 0 8.46-6.646 13.096-15.571 13.096-8.727 0-14.365-4.16-17.124-9.61zm-33.196.815c1.477 2.619 2.82 4.833 6.048 4.833 3.087 0 5.035-1.208 5.035-5.905V45.916h9.397v32.08c0 9.73-5.705 14.158-14.032 14.158-7.524 0-11.881-3.894-14.097-8.583z"/></svg>',
    experience: "2+ years"
  },
  { 
    name: "React", 
    level: "Beginner", 
    color: "blue-500", 
    logo: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 101 100"><path fill="#61DAFB" d="M50.307 58.816a8.816 8.816 0 1 0 0-17.632 8.816 8.816 0 0 0 0 17.632"/><path stroke="#61DAFB" stroke-width="5" d="M50.307 68.063c26.126 0 47.306-8.087 47.306-18.063s-21.18-18.062-47.306-18.062C24.18 31.938 3 40.024 3 50s21.18 18.063 47.307 18.063Z"/><path stroke="#61DAFB" stroke-width="5" d="M34.664 59.031C47.727 81.658 65.321 95.957 73.96 90.97c8.64-4.988 5.053-27.374-8.01-50C52.885 18.342 35.291 4.043 26.652 9.03s-5.052 27.374 8.011 50Z"/><path stroke="#61DAFB" stroke-width="5" d="M34.664 40.969c-13.063 22.626-16.65 45.012-8.01 50 8.638 4.988 26.232-9.311 39.295-31.938s16.65-45.012 8.01-50c-8.638-4.988-26.232 9.311-39.295 31.938Z"/></svg>',
    experience: "Less than 1 year"
  },
  { 
    name: "Node.js", 
    level: "Advanced", 
    color: "green-500", 
    logo: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100"><path fill="#8CC84B" d="M46.279 1.067c2.479-1.42 5.709-1.426 8.186 0 12.464 7.042 24.931 14.074 37.393 21.12 2.343 1.321 3.911 3.93 3.887 6.63v42.371c.018 2.813-1.705 5.483-4.178 6.774-12.422 7.004-24.838 14.016-37.259 21.02-2.53 1.447-5.825 1.335-8.277-.23-3.724-2.16-7.455-4.308-11.18-6.465-.76-.453-1.619-.815-2.156-1.552.475-.64 1.324-.72 2.015-1 1.554-.495 2.982-1.288 4.41-2.058.361-.247.802-.152 1.148.069 3.185 1.826 6.342 3.705 9.537 5.513.682.394 1.372-.129 1.955-.453 12.19-6.89 24.396-13.754 36.584-20.646a1.21 1.21 0 0 0 .664-1.191c.009-13.977.002-27.957.005-41.934a1.31 1.31 0 0 0-.781-1.308C75.852 20.756 63.479 13.773 51.102 6.8a1.29 1.29 0 0 0-1.458-.002c-12.378 6.975-24.749 13.964-37.126 20.935-.506.23-.845.738-.785 1.302q.002 20.966 0 41.936a1.19 1.19 0 0 0 .673 1.176c3.303 1.873 6.61 3.733 9.916 5.6 1.861 1.002 4.148 1.597 6.199.83 1.81-.65 3.08-2.497 3.045-4.42.017-13.895-.009-27.793.013-41.686-.046-.617.54-1.127 1.14-1.069 1.586-.01 3.175-.021 4.762.005.663-.015 1.119.649 1.037 1.27-.007 13.984.017 27.968-.01 41.952.003 3.726-1.528 7.781-4.975 9.605-4.247 2.2-9.496 1.733-13.691-.376-3.632-1.813-7.098-3.952-10.666-5.894C6.697 76.68 4.983 73.999 5 71.189V28.817c-.026-2.756 1.604-5.412 4.021-6.713Q27.651 11.588 46.28 1.067"/><path fill="#8CC84B" d="M57.114 30.417c5.417-.348 11.216-.206 16.091 2.462 3.774 2.046 5.867 6.338 5.933 10.53-.105.566-.696.878-1.236.84-1.572-.003-3.144.02-4.716-.011-.667.025-1.054-.59-1.138-1.179-.451-2.006-1.545-3.993-3.434-4.96-2.898-1.452-6.26-1.38-9.42-1.349-2.308.123-4.79.322-6.744 1.68-1.5 1.027-1.957 3.102-1.421 4.773.505 1.2 1.89 1.587 3.023 1.944 6.529 1.708 13.447 1.538 19.85 3.785 2.651.916 5.245 2.697 6.152 5.472 1.187 3.72.667 8.168-1.98 11.154-2.146 2.458-5.273 3.796-8.39 4.522-4.149.925-8.454.949-12.666.538-3.962-.451-8.084-1.492-11.142-4.191-2.614-2.27-3.892-5.808-3.765-9.223.03-.576.605-.978 1.157-.93 1.583-.014 3.165-.018 4.748.001.632-.045 1.101.501 1.133 1.097.292 1.912 1.01 3.918 2.678 5.051 3.216 2.075 7.253 1.933 10.936 1.991 3.052-.135 6.477-.176 8.967-2.193 1.314-1.15 1.703-3.075 1.348-4.73-.384-1.398-1.847-2.05-3.103-2.476-6.444-2.038-13.44-1.299-19.822-3.604-2.59-.916-5.096-2.647-6.092-5.309-1.389-3.767-.752-8.427 2.172-11.313 2.852-2.87 6.968-3.976 10.881-4.372"/></svg>',
    experience: "3+ years"
  },
  { 
    name: "Python", 
    level: "Advanced", 
    color: "blue-400", 
    logo: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100"><path fill="url(#a)" d="M49.64 0C24.254 0 25.839 11.009 25.839 11.009l.028 11.406h24.225v3.424H16.245S0 23.997 0 49.61c0 25.615 14.179 24.707 14.179 24.707h8.462V62.432s-.457-14.18 13.952-14.18H60.62s13.5.219 13.5-13.046V13.273S76.17 0 49.64 0M36.282 7.67a4.354 4.354 0 0 1 4.358 4.358 4.356 4.356 0 0 1-6.027 4.028 4.35 4.35 0 0 1-2.69-4.028 4.355 4.355 0 0 1 4.359-4.358"/><path fill="url(#b)" d="M50.36 99.48c25.387 0 23.802-11.009 23.802-11.009l-.028-11.405H49.908V73.64h33.847S100 75.485 100 49.869c0-25.615-14.179-24.706-14.179-24.706H77.36v11.886s.457 14.179-13.952 14.179H39.38s-13.5-.218-13.5 13.047v21.933S23.83 99.48 50.36 99.48m13.359-7.67a4.355 4.355 0 0 1-4.028-6.026 4.35 4.35 0 0 1 4.028-2.69 4.355 4.355 0 0 1 4.027 6.027 4.355 4.355 0 0 1-4.027 2.69"/><defs><linearGradient id="a" x1="9.61" x2="59.167" y1="8.948" y2="58.01" gradientUnits="userSpaceOnUse"><stop stop-color="#387EB8"/><stop offset="1" stop-color="#366994"/></linearGradient><linearGradient id="b" x1="40.028" x2="93.247" y1="40.453" y2="90.762" gradientUnits="userSpaceOnUse"><stop stop-color="#FFE052"/><stop offset="1" stop-color="#FFC331"/></linearGradient></defs></svg>',
    experience: "3+ years"
  },
  { 
    name: "MongoDB", 
    level: "Intermediate", 
    color: "green-600", 
    logo: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100"><path fill="#599636" d="m50.146.273 2.668 5.012c.6.925 1.25 1.744 2.016 2.506a70 70 0 0 1 6.262 7.08c4.521 5.938 7.57 12.531 9.749 19.662 1.306 4.356 2.015 8.824 2.069 13.343.218 13.508-4.413 25.107-13.75 34.747a40 40 0 0 1-4.905 4.194c-.925 0-1.363-.71-1.744-1.363a11.2 11.2 0 0 1-1.362-3.921c-.328-1.635-.544-3.269-.438-4.956v-.763c-.075-.162-.89-75.157-.566-75.541"/><path fill="#6CAC48" d="M50.146.108c-.11-.22-.22-.054-.329.053.053 1.093-.328 2.068-.925 3-.656.924-1.524 1.634-2.396 2.396-4.844 4.194-8.656 9.259-11.709 14.924-4.062 7.624-6.156 15.796-6.75 24.398-.271 3.103.982 14.052 1.96 17.211 2.669 8.387 7.462 15.415 13.67 21.515 1.526 1.468 3.157 2.83 4.844 4.14.49 0 .544-.438.656-.763a15 15 0 0 0 .491-2.124l1.094-8.169z"/><path fill="#C2BFBF" d="M52.814 90.135c.11-1.25.71-2.287 1.362-3.321-.656-.272-1.143-.813-1.524-1.416-.33-.57-.601-1.173-.813-1.797-.762-2.287-.925-4.687-1.143-7.024V75.16c-.272.22-.329 2.069-.329 2.344a54 54 0 0 1-.98 7.353c-.163.98-.273 1.959-.876 2.83 0 .11 0 .22.053.382.981 2.887 1.25 5.827 1.416 8.824v1.094c0 1.306-.053 1.03 1.031 1.468.438.163.925.22 1.362.544.329 0 .382-.272.382-.49l-.163-1.797V92.7c-.053-.875.11-1.744.219-2.563z"/></svg>',
    experience: "1+ years"
  },
  { 
    name: "Git", 
    level: "Intermediate", 
    color: "orange-500", 
    logo: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100"><path fill="#DE4C36" d="M98.114 45.544 54.454 1.886a6.44 6.44 0 0 0-9.108 0l-9.066 9.066 11.5 11.501a7.65 7.65 0 0 1 7.869 1.834 7.66 7.66 0 0 1 1.817 7.916L68.55 43.287c2.682-.923 5.776-.326 7.918 1.82a7.66 7.66 0 0 1 0 10.836 7.662 7.662 0 0 1-12.508-8.335L53.623 37.271v27.202a7.663 7.663 0 0 1 2.026 12.288 7.66 7.66 0 0 1-10.836 0 7.663 7.663 0 0 1 2.508-12.51V36.795a7.6 7.6 0 0 1-2.508-1.672 7.66 7.66 0 0 1-1.651-8.377l-11.338-11.34L1.887 45.344a6.44 6.44 0 0 0 0 9.11l43.661 43.659a6.44 6.44 0 0 0 9.108 0l43.458-43.457a6.444 6.444 0 0 0 0-9.11"/></svg>',
    experience: "2+ years"
  },
  { 
    name: "Docker", 
    level: "Beginner", 
    color: "blue-600", 
    logo: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100"><path fill="#2496ED" d="M99.014 41.088c-.271-.215-2.803-2.127-8.142-2.127-1.41.006-2.817.127-4.207.362-1.034-7.083-6.89-10.537-7.153-10.692l-1.433-.827-.943 1.361a19.2 19.2 0 0 0-2.55 5.96c-.955 4.043-.374 7.84 1.68 11.087-2.48 1.382-6.459 1.723-7.264 1.753H3.131a3.13 3.13 0 0 0-3.127 3.113A47.4 47.4 0 0 0 2.89 68.004c2.27 5.951 5.645 10.334 10.037 13.017 4.922 3.014 12.918 4.736 21.982 4.736a65.6 65.6 0 0 0 12.207-1.106 51 51 0 0 0 15.932-5.787 43.8 43.8 0 0 0 10.872-8.9c5.22-5.908 8.328-12.488 10.64-18.335h.922c5.714 0 9.227-2.286 11.165-4.203a12.2 12.2 0 0 0 2.945-4.361l.409-1.197z"/><path fill="#2496ED" d="M9.236 46.036h8.827a.77.77 0 0 0 .771-.771v-7.863a.77.77 0 0 0-.766-.775H9.236a.77.77 0 0 0-.77.771v7.867c0 .426.345.77.77.77m12.164.001h8.828a.77.77 0 0 0 .77-.771v-7.863a.77.77 0 0 0-.766-.775H21.4a.775.775 0 0 0-.775.775v7.863c.003.426.349.77.775.77m12.35.001h8.827a.77.77 0 0 0 .77-.771v-7.863a.77.77 0 0 0-.766-.775h-8.832a.77.77 0 0 0-.77.771v7.867c0 .426.345.77.77.77m12.204.001h8.827a.775.775 0 0 0 .775-.771v-7.863a.775.775 0 0 0-.775-.775h-8.827a.77.77 0 0 0-.771.771v7.867c0 .426.345.77.77.77M21.4 34.724h8.828a.775.775 0 0 0 .77-.775v-7.862a.77.77 0 0 0-.77-.771H21.4a.775.775 0 0 0-.775.77v7.863a.78.78 0 0 0 .775.775m12.35 0h8.827a.775.775 0 0 0 .77-.775v-7.862a.77.77 0 0 0-.77-.771H33.75a.77.77 0 0 0-.771.77v7.863c0 .426.344.773.77.775m12.204 0h8.827a.78.78 0 0 0 .775-.775v-7.862a.775.775 0 0 0-.775-.771h-8.827a.77.77 0 0 0-.771.77v7.863c0 .426.344.773.77.775m.001-11.316h8.827a.775.775 0 0 0 .775-.77V14.77a.775.775 0 0 0-.775-.77h-8.827a.77.77 0 0 0-.771.77v7.868c0 .425.345.77.77.77m12.311 22.628h8.827a.775.775 0 0 0 .775-.771v-7.863a.775.775 0 0 0-.775-.775h-8.827a.77.77 0 0 0-.77.771v7.867c0 .426.345.77.77.77"/></svg>',
    experience: "Less than 1 year"
  },
  { 
    name: "AWS", 
    level: "Intermediate", 
    color: "orange-400", 
    logo: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRkY5OTAwIi8+CjxwYXRoIGQ9Ik0xMCAxMEgzMFYzMEgxMFYxMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNSAxNUgyNVYyNUgxNVYxNVoiIGZpbGw9IiNGRjk5MDAiLz4KPC9zdmc+Cg==",
    experience: "2+ years"
  }
];

/* Enhanced DOM management */
const dom = {};
document.addEventListener('DOMContentLoaded', () => {
  // Cache DOM elements
  dom.loader = document.getElementById('loader');
  dom.progressFill = document.querySelector('.progress-fill');
  dom.loaderPercent = document.getElementById('loader-percent');
  dom.main = document.getElementById('main-content');

  dom.projectsGrid = document.getElementById('projects-grid');
  dom.techGrid = document.getElementById('tech-grid');

  dom.mobileToggle = document.getElementById('mobile-toggle');
  dom.mobileNav = document.getElementById('mobile-nav');

  dom.hireBtn = document.getElementById('hero-hire');
  dom.hireBtnNav = document.getElementById('hire-btn-nav');
  dom.mobileHire = document.getElementById('mobile-hire');
  dom.hireModal = document.getElementById('hire-modal');
  dom.hireInner = document.getElementById('hire-modal-inner');
  dom.contactAnyway = document.getElementById('contact-anyway-btn');
  dom.closeModal = document.getElementById('close-modal-btn');

  dom.contactForm = document.getElementById('contact-form');
  dom.formStatus = document.getElementById('form-status');

  dom.instaBtn = document.getElementById('insta-btn');
  dom.instaTip = document.getElementById('insta-tip');
  dom.fbBtn = document.getElementById('fb-btn');
  dom.fbTip = document.getElementById('fb-tip');

  // Initialize Lucide icons
  if (typeof lucide !== 'undefined') lucide.createIcons();

  // Initialize everything
  startEnhancedLoader();
});

/* Enhanced loader with better progression */
function startEnhancedLoader() {
  const messages = [
    "Initializing debugging protocols...",
    "Compiling coffee into code...",
    "Parsing stack traces...",
    "Optimizing user experience...",
    "Ready to debug the world!"
  ];
  
  let messageIndex = 0;
  const messageEl = dom.loader.querySelector('p');
  
  // Change message every 600ms
  const messageInterval = setInterval(() => {
    if (messageIndex < messages.length - 1) {
      messageEl.textContent = messages[++messageIndex];
    }
  }, 600);

  requestAnimationFrame(() => {
    dom.progressFill.style.width = '100%';
    const start = performance.now();
    const duration = 3000;
    
    function updateProgress(now) {
      const progress = Math.min(1, (now - start) / duration);
      const percentage = Math.floor(progress * 100);
      dom.loaderPercent.textContent = percentage + '%';
      
      if (progress < 1) {
        requestAnimationFrame(updateProgress);
      } else {
        clearInterval(messageInterval);
        setTimeout(() => {
          dom.loader.classList.add('opacity-0');
          setTimeout(() => { 
            dom.loader.style.display = 'none'; 
            dom.main.style.opacity = '1'; 
            bindEnhancedNav();
            renderEnhancedProjects();
            renderEnhancedTechStack();
            bindProjectFilters();
            bindEnhancedSocialTooltips();
            bindEnhancedContactForm();
            bindHireModal();
            bindProfileTilt();
            initScrollAnimations();
            initTypingAnimation();
            initThreeScene();
          }, 500);
        }, 200);
      }
    }
    
    updateProgress(performance.now());
  });
}

/* Enhanced navigation with smooth scrolling and active states */
function bindEnhancedNav() {
  // Mobile menu toggle
  dom.mobileToggle?.addEventListener('click', () => {
    dom.mobileNav.classList.toggle('hidden');
  });

  // Close mobile nav on link clicks
  dom.mobileNav?.querySelectorAll('a')?.forEach(link => {
    link.addEventListener('click', () => {
      dom.mobileNav.classList.add('hidden');
    });
  });

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      const targetId = this.getAttribute('href');
      if (targetId && targetId !== '#') {
        e.preventDefault();
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          const headerOffset = 80;
          const elementPosition = targetElement.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });

  // Active navigation highlighting
  const navLinks = document.querySelectorAll('.nav-link');
  const sections = document.querySelectorAll('section[id]');

  function highlightActiveNav() {
    let currentSection = '';
    sections.forEach(section => {
      const sectionTop = section.getBoundingClientRect().top;
      if (sectionTop <= 100) {
        currentSection = section.getAttribute('id');
      }
    });

    navLinks.forEach(link => {
      link.classList.remove('text-amber-400');
      link.classList.add('text-slate-300');
      if (link.getAttribute('href') === `#${currentSection}`) {
        link.classList.add('text-amber-400');
        link.classList.remove('text-slate-300');
      }
    });
  }

  window.addEventListener('scroll', throttle(highlightActiveNav, 100));
}

/* Enhanced project rendering with better cards */
function renderEnhancedProjects() {
  if (!dom.projectsGrid) return;
  
  dom.projectsGrid.innerHTML = '';
  
  projectsData.forEach((project, index) => {
    const card = document.createElement('article');
    card.className = 'project-card bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 flex flex-col justify-between hover:border-amber-400/30 transition-all duration-300';
    card.setAttribute('data-category', project.category);
    card.style.animationDelay = `${index * 100}ms`;

    const header = document.createElement('div');
    header.className = 'flex items-start gap-4 mb-4';
    
    const iconContainer = document.createElement('div');
    iconContainer.className = 'relative';
    
    const iconWrapper = document.createElement('div');
    iconWrapper.className = `w-14 h-14 rounded-xl flex items-center justify-center bg-gradient-to-r ${project.gradient} shadow-lg`;
    
    const icon = document.createElement('i');
    icon.dataset.lucide = project.icon || 'folder';
    icon.className = 'w-7 h-7 text-white';
    iconWrapper.appendChild(icon);
    
    if (project.active) {
      const statusDot = document.createElement('div');
      statusDot.className = 'absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-slate-800 animate-pulse';
      iconContainer.appendChild(statusDot);
    }
    
    iconContainer.appendChild(iconWrapper);
    header.appendChild(iconContainer);

    const titleGroup = document.createElement('div');
    titleGroup.className = 'flex-1';
    titleGroup.innerHTML = `
      <div class="flex items-center gap-2 mb-1">
        <h3 class="text-xl font-bold text-white">${escapeHtml(project.title)}</h3>
        ${project.active ? '<span class="px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium">Active</span>' : ''}
      </div>
      <div class="flex items-center gap-3 text-sm text-slate-400">
        <span class="flex items-center gap-1">
          <i data-lucide="user" class="w-3 h-3"></i>
          ${escapeHtml(project.role)}
        </span>
        <span class="flex items-center gap-1">
          <i data-lucide="clock" class="w-3 h-3"></i>
          ${escapeHtml(project.duration)}
        </span>
      </div>
    `;
    header.appendChild(titleGroup);

    const description = document.createElement('p');
    description.className = 'text-slate-300 leading-relaxed mb-6';
    description.textContent = project.description;

    const techContainer = document.createElement('div');
    techContainer.className = 'mb-6';
    
    const techLabel = document.createElement('div');
    techLabel.className = 'text-xs font-semibold text-slate-400 uppercase tracking-wide mb-3';
    techLabel.textContent = 'Technologies';
    
    const techGrid = document.createElement('div');
    techGrid.className = 'flex flex-wrap gap-2';
    
    project.technologies.forEach(tech => {
      const techTag = document.createElement('span');
      techTag.className = 'px-3 py-1 bg-slate-700/60 text-slate-200 rounded-full text-sm font-medium border border-slate-600 hover:bg-slate-600/60 transition-colors';
      techTag.textContent = tech;
      techGrid.appendChild(techTag);
    });
    
    techContainer.appendChild(techLabel);
    techContainer.appendChild(techGrid);

    const footer = document.createElement('div');
    footer.className = 'flex items-center justify-between pt-4 border-t border-slate-700';
    
    const links = document.createElement('div');
    links.className = 'flex items-center gap-4';
    
    const demoLink = document.createElement('a');
    demoLink.href = project.demo || '#';
    demoLink.className = 'inline-flex items-center gap-2 text-amber-400 hover:text-amber-300 font-medium transition-colors';
    demoLink.innerHTML = `
      <i data-lucide="external-link" class="w-4 h-4"></i>
      <span>${project.category === 'current' ? 'Preview' : 'Live Demo'}</span>
    `;
    
    const codeLink = document.createElement('a');
    codeLink.href = project.github || '#';
    codeLink.className = 'inline-flex items-center gap-2 text-slate-300 hover:text-white font-medium transition-colors';
    codeLink.innerHTML = `
      <i data-lucide="github" class="w-4 h-4"></i>
      <span>Source</span>
    `;
    
    links.appendChild(demoLink);
    links.appendChild(codeLink);
    
    const categoryBadge = document.createElement('span');
    categoryBadge.className = `px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide ${
      project.category === 'current' 
        ? 'bg-blue-500/20 text-blue-400' 
        : 'bg-slate-600/20 text-slate-400'
    }`;
    categoryBadge.textContent = project.category;
    
    footer.appendChild(links);
    footer.appendChild(categoryBadge);

    card.appendChild(header);
    card.appendChild(description);
    card.appendChild(techContainer);
    card.appendChild(footer);

    dom.projectsGrid.appendChild(card);
  });
  
  // Re-initialize Lucide icons for new elements
  if (typeof lucide !== 'undefined') lucide.createIcons();
}

/* Enhanced tech stack with better visual hierarchy */
function renderEnhancedTechStack() {
  if (!dom.techGrid) return;
  
  dom.techGrid.innerHTML = '';
  
  techStackData.forEach((tech, index) => {
    const item = document.createElement('div');
    item.className = 'tech-item bg-slate-800 border border-slate-700 rounded-2xl p-6 flex flex-col items-center gap-4 text-center hover:border-amber-400/30 cursor-pointer';
    item.style.animationDelay = `${index * 50}ms`;
    
    // Icon container with glow effect
    const iconContainer = document.createElement('div');
    iconContainer.className = 'relative w-16 h-16 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg';
    
    if (tech.logo.trim().startsWith('<svg')) {
    // Inject raw SVG markup
    iconContainer.innerHTML = tech.logo;
    const svgEl = iconContainer.querySelector('svg');
    if (svgEl) svgEl.classList.add('w-10', 'h-10', 'object-contain', 'drop-shadow-sm');
    } else {
    // Fallback to normal image
    const icon = document.createElement('img');
    icon.src = tech.logo;
    icon.alt = tech.name + ' logo';
    icon.className = 'w-10 h-10 object-contain filter drop-shadow-sm';
    icon.onerror = function() {
        this.style.display = 'none';
        const fallbackIcon = document.createElement('i');
        fallbackIcon.dataset.lucide = 'code';
        fallbackIcon.className = 'w-8 h-8 text-slate-400';
        iconContainer.appendChild(fallbackIcon);
        if (typeof lucide !== 'undefined') lucide.createIcons();
    };
    iconContainer.appendChild(icon);
    }

    
    // Tech info
    const info = document.createElement('div');
    info.className = 'space-y-2';
    
    const name = document.createElement('h3');
    name.className = 'text-lg font-bold text-white';
    name.textContent = tech.name;
    
    const level = document.createElement('div');
    level.className = 'text-sm text-slate-400';
    level.textContent = tech.level;
    
    const experience = document.createElement('div');
    experience.className = 'text-xs text-slate-500';
    experience.textContent = tech.experience;
    
    // Skill level indicator
    const skillBar = document.createElement('div');
    skillBar.className = 'w-full h-1 bg-slate-700 rounded-full overflow-hidden';
    
    const skillFill = document.createElement('div');
    const skillWidth = tech.level === 'Expert' ? '100%' : tech.level === 'Advanced' ? '80%' : '60%';
    skillFill.className = 'h-full bg-gradient-to-r from-amber-400 to-yellow-500 transition-all duration-1000 ease-out';
    skillFill.style.width = '0%';
    
    // Animate skill bar on scroll
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setTimeout(() => {
            skillFill.style.width = skillWidth;
          }, index * 100);
        }
      });
    });
    observer.observe(item);
    
    skillBar.appendChild(skillFill);
    
    info.appendChild(name);
    info.appendChild(level);
    info.appendChild(experience);
    info.appendChild(skillBar);
    
    item.appendChild(iconContainer);
    item.appendChild(info);
    
    dom.techGrid.appendChild(item);
  });
}

/* Enhanced project filtering with smooth animations */
function bindProjectFilters() {
  document.querySelectorAll('.filter-btn').forEach(button => {
    button.addEventListener('click', (e) => {
      // Update active button
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('bg-slate-700');
        btn.classList.add('bg-slate-800');
      });
      e.currentTarget.classList.add('bg-slate-700');
      e.currentTarget.classList.remove('bg-slate-800');
      
      const filterValue = e.currentTarget.getAttribute('data-filter');
      const projects = document.querySelectorAll('[data-category]');
      
      projects.forEach((project, index) => {
        const shouldShow = filterValue === 'all' || project.getAttribute('data-category') === filterValue;
        
        if (shouldShow) {
          project.style.display = '';
          project.style.animation = `fadeInUp 0.6s ease forwards ${index * 0.1}s`;
        } else {
          project.style.animation = 'fadeOut 0.3s ease forwards';
          setTimeout(() => {
            project.style.display = 'none';
          }, 300);
        }
      });
    });
  });
}

/* Enhanced social tooltips with better UX */
function bindEnhancedSocialTooltips() {
  const tooltipElements = [
    { button: dom.instaBtn, tooltip: dom.instaTip },
    { button: dom.fbBtn, tooltip: dom.fbTip }
  ];
  
  tooltipElements.forEach(({ button, tooltip }) => {
    if (!button || !tooltip) return;
    
    let hideTimeout;
    
    const showTooltip = () => {
      clearTimeout(hideTimeout);
      tooltip.classList.remove('invisible');
      tooltip.classList.add('opacity-100');
    };
    
    const hideTooltip = () => {
      hideTimeout = setTimeout(() => {
        tooltip.classList.add('invisible');
        tooltip.classList.remove('opacity-100');
      }, 150);
    };
    
    button.addEventListener('mouseenter', showTooltip);
    button.addEventListener('mouseleave', hideTooltip);
    button.addEventListener('focus', showTooltip);
    button.addEventListener('blur', hideTooltip);
    
    button.addEventListener('click', (e) => {
      e.preventDefault();
      showTooltip();
      setTimeout(hideTooltip, 3000);
    });
  });
}

/* Enhanced contact form with better validation and UX */
function bindEnhancedContactForm() {
  if (!dom.contactForm) return;
  
  const inputs = dom.contactForm.querySelectorAll('input, textarea');
  
  // Enhanced input validation
  inputs.forEach(input => {
    input.addEventListener('blur', validateField);
    input.addEventListener('input', clearFieldError);
  });
  
  function validateField(e) {
    const field = e.target;
    const value = field.value.trim();
    
    // Remove existing error styling
    field.classList.remove('border-red-500');
    
    let isValid = true;
    
    if (field.hasAttribute('required') && !value) {
      isValid = false;
    } else if (field.type === 'email' && value) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      isValid = emailRegex.test(value);
    }
    
    if (!isValid) {
      field.classList.add('border-red-500');
    }
  }
  
  function clearFieldError(e) {
    e.target.classList.remove('border-red-500');
  }
  
  dom.contactForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const submitButton = document.getElementById('submit-btn');
    const formData = new FormData(dom.contactForm);
    
    // Honeypot check
    if (formData.get('honey')) {
      dom.formStatus.innerHTML = '<span class="text-red-400">❌ Bot detected.</span>';
      return;
    }
    
    // Validate all fields
    let isFormValid = true;
    inputs.forEach(input => {
      validateField({ target: input });
      if (input.classList.contains('border-red-500')) {
        isFormValid = false;
      }
    });
    
    if (!isFormValid) {
      dom.formStatus.innerHTML = '<span class="text-red-400">❌ Please fix the errors above.</span>';
      return;
    }
    
    // Submit form
    submitButton.disabled = true;
    submitButton.innerHTML = '<i data-lucide="loader" class="w-4 h-4 inline mr-2 animate-spin"></i>Sending...';
    dom.formStatus.innerHTML = '<span class="text-blue-400">📤 Sending message...</span>';
    
    try {
      const response = await fetch(GOOGLE_SHEETS_URL, {
        method: 'POST',
        body: formData
      });
      
      if (!response.ok) throw new Error('Network response was not ok');
      
      dom.formStatus.innerHTML = '<span class="text-green-400">Message sent! I will get back to you faster than you can say "undefined is not a function".</span>';
      dom.contactForm.reset();
      
      // Auto-clear success message
      setTimeout(() => {
        dom.formStatus.textContent = '';
      }, 5000);
      
    } catch (error) {
      console.error('Contact form error:', error);
      dom.formStatus.innerHTML = '<span class="text-red-400">❌ Failed to send message. Please try again later.</span>';
    } finally {
      submitButton.disabled = false;
      submitButton.innerHTML = '<i data-lucide="send" class="w-4 h-4 inline mr-2"></i>Send Message';
      if (typeof lucide !== 'undefined') lucide.createIcons();
    }
  });
}

/* Enhanced hire modal with better animations and focus management */
let lastFocusedElement = null;

function bindHireModal() {
  // Hire button event listeners
  [dom.hireBtn, dom.hireBtnNav, dom.mobileHire].forEach(btn => {
    btn?.addEventListener('click', openHireModal);
  });

  // Modal event listeners
  dom.closeModal?.addEventListener('click', closeHireModal);
  dom.hireModal?.addEventListener('click', (e) => {
    if (e.target === dom.hireModal) closeHireModal();
  });
  dom.contactAnyway?.addEventListener('click', () => {
    closeHireModal();
    setTimeout(() => {
      document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' });
      setTimeout(() => {
        document.getElementById('name')?.focus();
      }, 800);
    }, 300);
  });
}

function openHireModal() {
  lastFocusedElement = document.activeElement;
  dom.hireModal.classList.remove('hidden');
  document.body.classList.add('modal-open');
  
  // Animate modal appearance
  requestAnimationFrame(() => {
    dom.hireInner.classList.remove('scale-95');
    dom.hireInner.classList.add('scale-100');
    dom.hireInner.style.opacity = '1';
  });
  
  // Focus management
  setTimeout(() => {
    dom.contactAnyway?.focus();
  }, 150);
  
  // Trap focus within modal
  trapFocus(dom.hireModal);
}

function closeHireModal() {
  dom.hireInner.style.opacity = '0';
  dom.hireInner.classList.remove('scale-100');
  dom.hireInner.classList.add('scale-95');
  
  setTimeout(() => {
    dom.hireModal.classList.add('hidden');
    document.body.classList.remove('modal-open');
    if (lastFocusedElement) {
      lastFocusedElement.focus();
    }
  }, 200);
}

function trapFocus(container) {
  const focusableElements = container.querySelectorAll(
    'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
  );
  
  if (!focusableElements.length) return;
  
  const firstElement = focusableElements[0];
  const lastElement = focusableElements[focusableElements.length - 1];
  
  function handleKeyDown(e) {
    if (e.key === 'Tab') {
      if (e.shiftKey && document.activeElement === firstElement) {
        e.preventDefault();
        lastElement.focus();
      } else if (!e.shiftKey && document.activeElement === lastElement) {
        e.preventDefault();
        firstElement.focus();
      }
    } else if (e.key === 'Escape') {
      closeHireModal();
      container.removeEventListener('keydown', handleKeyDown);
    }
  }
  
  container.addEventListener('keydown', handleKeyDown);
}

/* Enhanced profile image tilt with realistic 3D effect */
function bindProfileTilt() {
  const frame = document.getElementById('photo-frame');
  if (!frame) return;
  
  let isHovering = false;
  
  frame.addEventListener('mouseenter', () => {
    isHovering = true;
  });
  
  frame.addEventListener('mouseleave', () => {
    isHovering = false;
    frame.style.transform = '';
  });
  
  frame.addEventListener('mousemove', (e) => {
    if (!isHovering) return;
    
    const rect = frame.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    const mouseX = e.clientX - centerX;
    const mouseY = e.clientY - centerY;
    
    const rotateX = (mouseY / rect.height) * -15;
    const rotateY = (mouseX / rect.width) * 15;
    
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(20px)
    `;
  });
  
  // Touch support for mobile
  frame.addEventListener('touchmove', (e) => {
    e.preventDefault();
    const touch = e.touches[0];
    const rect = frame.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    const mouseX = touch.clientX - centerX;
    const mouseY = touch.clientY - centerY;
    
    const rotateX = (mouseY / rect.height) * -10;
    const rotateY = (mouseX / rect.width) * 10;
    
    frame.style.transform = `
      perspective(1000px) 
      rotateX(${rotateX}deg) 
      rotateY(${rotateY}deg) 
      translateZ(10px)
    `;
  });
  
  frame.addEventListener('touchend', () => {
    frame.style.transform = '';
  });
}

/* Enhanced scroll animations with stagger effects */
function initScrollAnimations() {
  if (!('IntersectionObserver' in window)) {
    // Fallback for older browsers
    document.querySelectorAll('section').forEach(section => {
      section.classList.add('animate-in');
    });
    return;
  }
  
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        // Stagger animation for child elements
        const children = entry.target.querySelectorAll('.project-card, .tech-item');
        children.forEach((child, childIndex) => {
          setTimeout(() => {
            child.style.opacity = '1';
            child.style.transform = 'translateY(0) scale(1)';
          }, childIndex * 100);
        });
        
        entry.target.classList.add('animate-in');
      }
    });
  }, observerOptions);
  
  document.querySelectorAll('section').forEach(section => {
    observer.observe(section);
  });
}

/* Typing animation for hero text */
function initTypingAnimation() {
  const typingElement = document.querySelector('.typing-animation');
  if (!typingElement) return;
  
  // Remove typing animation class after animation completes
  setTimeout(() => {
    typingElement.classList.remove('typing-animation');
    typingElement.style.borderRight = 'none';
  }, 3000);
}

/* Enhanced Three.js scene with better performance and effects */
let three = { 
  renderer: null, 
  scene: null, 
  camera: null, 
  animationId: null, 
  isRunning: false, 
  particles: null, 
  techGroup: null,
  mouseX: 0,
  mouseY: 0
};

function initThreeScene() {
  // Check for reduced motion preference
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const isSmallScreen = window.innerWidth < 768;
  
  if (!window.THREE || prefersReducedMotion || isSmallScreen) {
    showThreeFallback();
    return;
  }
  
  try {
    const canvas = document.getElementById('three-canvas');
    if (!canvas) return;
    
    // Scene setup
    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x000000, 0.002);
    
    // Renderer setup with optimizations
    const renderer = new THREE.WebGLRenderer({ 
      canvas, 
      antialias: true, 
      alpha: true,
      powerPreference: 'high-performance'
    });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(canvas.clientWidth, canvas.clientHeight);
    renderer.setClearColor(0x000000, 0);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    
    // Camera setup
    const camera = new THREE.PerspectiveCamera(
      60, 
      canvas.clientWidth / canvas.clientHeight, 
      0.1, 
      1000
    );
    camera.position.set(0, 8, 32);
    
    // Enhanced lighting setup
    const ambientLight = new THREE.AmbientLight(0x404040, 1.2);
    const keyLight = new THREE.PointLight(0xffd700, 2, 100);
    keyLight.position.set(20, 25, 25);
    keyLight.castShadow = true;
    keyLight.shadow.mapSize.width = 2048;
    keyLight.shadow.mapSize.height = 2048;
    
    const rimLight = new THREE.PointLight(0x00aaff, 1, 100);
    rimLight.position.set(-15, -15, 35);
    
    const fillLight = new THREE.PointLight(0xff6600, 0.5, 50);
    fillLight.position.set(0, -20, 20);
    
    scene.add(ambientLight, keyLight, rimLight, fillLight);
    
    // Enhanced tech group
    const techGroup = new THREE.Group();
    
    // Main circuit board
    const boardGeometry = new THREE.BoxGeometry(12, 1, 10);
    const boardMaterial = new THREE.MeshPhongMaterial({ 
      color: 0x0a1a0a,
      shininess: 30,
      transparent: true,
      opacity: 0.9
    });
    const board = new THREE.Mesh(boardGeometry, boardMaterial);
    board.position.set(0, -2, 0);
    board.receiveShadow = true;
    techGroup.add(board);
    
    // Circuit traces
    const traceMaterial = new THREE.MeshPhongMaterial({ 
      color: 0x00ff88,
      emissive: 0x003322,
      shininess: 100
    });
    
    for (let i = 0; i < 12; i++) {
      const trace = new THREE.Mesh(
        new THREE.BoxGeometry(0.2, 0.05, 8),
        traceMaterial
      );
      trace.position.set(
        (i - 6) * 0.8,
        -1.5,
        (Math.random() - 0.5) * 2
      );
      trace.rotation.y = (Math.random() - 0.5) * 0.3;
      techGroup.add(trace);
    }
    
    // CPU chips with enhanced materials
    const cpuMaterial = new THREE.MeshPhongMaterial({
      color: 0x1a1a2e,
      emissive: 0x0f4c75,
      emissiveIntensity: 0.3,
      shininess: 50
    });
    
    for (let i = 0; i < 6; i++) {
      const size = 1 + Math.random() * 1.5;
      const cpu = new THREE.Mesh(
        new THREE.BoxGeometry(size, size, size),
        cpuMaterial
      );
      cpu.position.set(
        (Math.random() - 0.5) * 8,
        -0.5 + size * 0.5,
        (Math.random() - 0.5) * 6
      );
      cpu.rotation.set(
        Math.random() * 0.5,
        Math.random() * Math.PI,
        Math.random() * 0.5
      );
      cpu.castShadow = true;
      techGroup.add(cpu);
    }
    
    // Outer orbital ring
    const ringGeometry = new THREE.TorusGeometry(16, 0.2, 16, 100);
    const ringMaterial = new THREE.MeshPhongMaterial({
      color: 0x333333,
      emissive: 0xffaa00,
      emissiveIntensity: 0.4,
      transparent: true,
      opacity: 0.8
    });
    const ring = new THREE.Mesh(ringGeometry, ringMaterial);
    ring.rotation.x = -0.4;
    ring.position.y = 2;
    techGroup.add(ring);
    
    // Data flow particles
    const particleCount = 800;
    const particleGeometry = new THREE.BufferGeometry();
    const particlePositions = new Float32Array(particleCount * 3);
    const particleVelocities = new Float32Array(particleCount * 3);
    
    for (let i = 0; i < particleCount; i++) {
      const i3 = i * 3;
      particlePositions[i3] = (Math.random() - 0.5) * 150;
      particlePositions[i3 + 1] = (Math.random() - 0.5) * 50;
      particlePositions[i3 + 2] = (Math.random() - 0.5) * 150;
      
      particleVelocities[i3] = (Math.random() - 0.5) * 0.02;
      particleVelocities[i3 + 1] = (Math.random() - 0.5) * 0.01;
      particleVelocities[i3 + 2] = (Math.random() - 0.5) * 0.02;
    }
    
    particleGeometry.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
    
    const particleMaterial = new THREE.PointsMaterial({
      color: 0xffd700,
      size: 0.8,
      transparent: true,
      opacity: 0.7,
      blending: THREE.AdditiveBlending
    });
    
    const particles = new THREE.Points(particleGeometry, particleMaterial);
    
    scene.add(techGroup, particles);
    
    // Store references
    three.renderer = renderer;
    three.scene = scene;
    three.camera = camera;
    three.particles = particles;
    three.techGroup = techGroup;
    three.particleVelocities = particleVelocities;
    three.isRunning = true;
    
    // Mouse interaction
    let targetMouseX = 0, targetMouseY = 0;
    
    function onMouseMove(event) {
      targetMouseX = (event.clientX / window.innerWidth) * 2 - 1;
      targetMouseY = -(event.clientY / window.innerHeight) * 2 + 1;
    }
    
    window.addEventListener('mousemove', throttle(onMouseMove, 16), { passive: true });
    
    // Animation loop
    let lastTime = 0;
    function animate(currentTime) {
      const deltaTime = currentTime - lastTime;
      lastTime = currentTime;
      
      // Smooth mouse following
      three.mouseX = lerp(three.mouseX, targetMouseX, 0.05);
      three.mouseY = lerp(three.mouseY, targetMouseY, 0.05);
      
      // Rotate tech group
      techGroup.rotation.y += 0.002;
      techGroup.rotation.x = three.mouseY * 0.1;
      techGroup.rotation.z = three.mouseX * 0.05;
      
      // Animate particles
      const positions = particles.geometry.attributes.position.array;
      for (let i = 0; i < particleCount; i++) {
        const i3 = i * 3;
        
        positions[i3] += three.particleVelocities[i3];
        positions[i3 + 1] += three.particleVelocities[i3 + 1];
        positions[i3 + 2] += three.particleVelocities[i3 + 2];
        
        // Reset particles that go too far
        if (Math.abs(positions[i3]) > 75) {
          positions[i3] = (Math.random() - 0.5) * 150;
          positions[i3 + 1] = (Math.random() - 0.5) * 50;
          positions[i3 + 2] = (Math.random() - 0.5) * 150;
        }
      }
      particles.geometry.attributes.position.needsUpdate = true;
      
      // Gentle floating animation
      techGroup.position.y = Math.sin(currentTime * 0.0008) * 0.8;
      
      renderer.render(scene, camera);
      
      if (three.isRunning) {
        three.animationId = requestAnimationFrame(animate);
      }
    }
    
    three.animationId = requestAnimationFrame(animate);
    
    // Handle resize
    function onWindowResize() {
      const width = canvas.clientWidth;
      const height = canvas.clientHeight;
      
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      
      renderer.setSize(width, height);
    }
    
    window.addEventListener('resize', debounce(onWindowResize, 250));
    
    // Pause animation when hero section is not visible
    const heroObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !three.isRunning) {
          three.isRunning = true;
          three.animationId = requestAnimationFrame(animate);
        } else if (!entry.isIntersecting && three.isRunning) {
          three.isRunning = false;
          if (three.animationId) {
            cancelAnimationFrame(three.animationId);
          }
        }
      });
    }, { threshold: 0.1 });
    
    const heroSection = document.getElementById('hero');
    if (heroSection) {
      heroObserver.observe(heroSection);
    }
    
  } catch (error) {
    console.warn('Three.js initialization failed:', error);
    showThreeFallback();
  }
}

function showThreeFallback() {
  const canvas = document.getElementById('three-canvas');
  const fallback = document.getElementById('three-fallback');
  
  if (canvas) canvas.style.display = 'none';
  if (fallback) fallback.classList.remove('hidden');
}

/* Utility functions */
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

function lerp(start, end, factor) {
  return start + (end - start) * factor;
}

function throttle(func, limit) {
  let inThrottle;
  return function() {
    const args = arguments;
    const context = this;       
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}

function debounce(func, delay) {
  let debounceTimer;
  return function() {
    const context = this;
    const args = arguments;
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(() => func.apply(context, args), delay);
  };
}
</script>

</body>
</html>